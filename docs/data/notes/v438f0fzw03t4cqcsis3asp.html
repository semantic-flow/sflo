<h1 id="2025-11-07-web-app-not-a-plugin">2025 11 07 Web App Not a Plugin<a aria-hidden="true" class="anchor-heading icon-link" href="#2025-11-07-web-app-not-a-plugin"></a></h1>
<h2 id="decisions">Decisions<a aria-hidden="true" class="anchor-heading icon-link" href="#decisions"></a></h2>
<ul>
<li>Introduce a new top-level <code>/sflo-web</code> folder in the monorepo to host a server-rendered web application.</li>
<li>Prefer a server-rendered approach (non-SPA) with progressive enhancement, likely using HTMX for partial updates and interactivity.</li>
<li>Create an optional <code>sflo-web-shim</code> plugin under <code>plugins/sflo-web-shim</code> to mount the server-rendered app within <code>sflo-host</code> (or proxy to a separately running <code>sflo-web</code> service when desired).</li>
<li>The shim registers a Fastify route prefix (e.g., <code>/web</code>) and serves SSR pages and static assets; it avoids client-side routing assumptions.</li>
<li>Separation allows independent development/deployment while maintaining optional integration with <code>sflo-host</code>.</li>
<li>Note: CLI package path has been updated by the user from <code>/cli</code> to <code>/sflo-cli</code>.</li>
</ul>
<h2 id="prompt">Prompt<a aria-hidden="true" class="anchor-heading icon-link" href="#prompt"></a></h2>
<p>since the web client might be used standalone, I think we need to change the monorepo file layout, adding a top-level /sflo-web folder. The web app should be servable as a stand-alone, static SPA web page. Should we have a sflo-host plugin (e.g. "sflo-web-shim") that wraps the sflo-web SPA, so if you're running sflo-host you can optionally serve the web app too? We need to update the memory-bank and create a new product.plugins.sflo-web-shim if you agree. I think modern Vue might be the best architectural choice for the SPA.</p>
<h2 id="todo">TODO<a aria-hidden="true" class="anchor-heading icon-link" href="#todo"></a></h2>
<ul class="contains-task-list">
<li class="task-list-item"><input type="checkbox" disabled> Design sflo-web server-rendered architecture (Fastify view engine + HTMX partials)</li>
<li class="task-list-item"><input type="checkbox" disabled> Implement sflo-web-shim plugin for sflo-host to mount SSR routes at <code>/web</code> and serve static assets</li>
<li class="task-list-item"><input type="checkbox" disabled> Update product.plugins.sflo-web-shim documentation (purpose, options, route prefix)</li>
<li class="task-list-item"><input type="checkbox" disabled> Update product.sflo-web to reflect server-rendered + HTMX approach (remove SPA/Vue references)</li>
<li class="task-list-item"><input type="checkbox" disabled> Create implementation plan and scaffolding for sflo-web (templates, layouts, HTMX patterns) and shim plugin</li>
<li class="task-list-item"><input type="checkbox" disabled> Sync memory bank with final decisions by referencing this task file</li>
</ul>
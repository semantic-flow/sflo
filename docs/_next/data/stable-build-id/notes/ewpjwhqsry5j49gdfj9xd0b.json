{"pageProps":{"note":{"id":"ewpjwhqsry5j49gdfj9xd0b","title":"Logging and Error Handling","desc":"","updated":1762365200861,"created":1762362594296,"custom":{},"fname":"dev.logging-and-error-handling","type":"note","vault":{"fsPath":"documentation","selfContained":false,"name":"sflo"},"contentHash":"0fd4d144de035806106b74119b4a4080","links":[{"from":{"fname":"dev.patterns","id":"i9v5cbqq2zqfhrjcolq48df","vaultName":"sflo"},"type":"backlink","position":{"start":{"line":115,"column":5,"offset":4016},"end":{"line":115,"column":39,"offset":4050},"indent":[]},"value":"dev.logging-and-error-handling"}],"anchors":{"logging-and-error-handling":{"type":"header","text":"Logging and Error Handling","value":"logging-and-error-handling","line":8,"column":0,"depth":1},"overview":{"type":"header","text":"Overview","value":"overview","line":12,"column":0,"depth":2},"quick-start":{"type":"header","text":"Quick Start","value":"quick-start","line":23,"column":0,"depth":2},"basic-usage":{"type":"header","text":"Basic Usage","value":"basic-usage","line":25,"column":0,"depth":3},"cli-tool-usage":{"type":"header","text":"CLI Tool Usage","value":"cli-tool-usage","line":37,"column":0,"depth":3},"service-usage":{"type":"header","text":"Service Usage","value":"service-usage","line":50,"column":0,"depth":3},"component-scoped-logger":{"type":"header","text":"Component-Scoped Logger","value":"component-scoped-logger","line":76,"column":0,"depth":3},"core-concepts":{"type":"header","text":"Core Concepts","value":"core-concepts","line":87,"column":0,"depth":2},"log-levels":{"type":"header","text":"Log Levels","value":"log-levels","line":89,"column":0,"depth":3},"log-context":{"type":"header","text":"Log Context","value":"log-context","line":104,"column":0,"depth":3},"function-name-capture":{"type":"header","text":"Function Name Capture","value":"function-name-capture","line":138,"column":0,"depth":4},"child-loggers":{"type":"header","text":"Child Loggers","value":"child-loggers","line":210,"column":0,"depth":3},"api-reference":{"type":"header","text":"API Reference","value":"api-reference","line":224,"column":0,"depth":2},"logger-interface":{"type":"header","text":"Logger Interface","value":"logger-interface","line":226,"column":0,"depth":3},"factory-functions":{"type":"header","text":"Factory Functions","value":"factory-functions","line":256,"column":0,"depth":3},"initloggerconfig":{"type":"header","text":"initLogger(config?)","value":"initloggerconfig","line":258,"column":0,"depth":4},"getlogger":{"type":"header","text":"getLogger()","value":"getlogger","line":275,"column":0,"depth":4},"createloggerconfig":{"type":"header","text":"createLogger(config?)","value":"createloggerconfig","line":284,"column":0,"depth":4},"createcliloggeroptions":{"type":"header","text":"createCliLogger(options?)","value":"createcliloggeroptions","line":296,"column":0,"depth":4},"createserviceloggerservicename-options":{"type":"header","text":"createServiceLogger(serviceName, options?)","value":"createserviceloggerservicename-options","line":309,"column":0,"depth":4},"getcomponentloggersourceurl":{"type":"header","text":"getComponentLogger(sourceUrl)","value":"getcomponentloggersourceurl","line":322,"column":0,"depth":4},"performance-tracking":{"type":"header","text":"Performance Tracking","value":"performance-tracking","line":332,"column":0,"depth":3},"configuration":{"type":"header","text":"Configuration","value":"configuration","line":346,"column":0,"depth":2},"logger-configuration":{"type":"header","text":"Logger Configuration","value":"logger-configuration","line":348,"column":0,"depth":3},"channel-configuration":{"type":"header","text":"Channel Configuration","value":"channel-configuration","line":387,"column":0,"depth":3},"environment-variables":{"type":"header","text":"Environment Variables","value":"environment-variables","line":415,"column":0,"depth":3},"error-handling":{"type":"header","text":"Error Handling","value":"error-handling","line":442,"column":0,"depth":2},"error-types":{"type":"header","text":"Error Types","value":"error-types","line":444,"column":0,"depth":3},"error-capture":{"type":"header","text":"Error Capture","value":"error-capture","line":468,"column":0,"depth":3},"error-properties":{"type":"header","text":"Error Properties","value":"error-properties","line":486,"column":0,"depth":3},"context-management":{"type":"header","text":"Context Management","value":"context-management","line":497,"column":0,"depth":2},"asynclocalstorage":{"type":"header","text":"AsyncLocalStorage","value":"asynclocalstorage","line":499,"column":0,"depth":3},"context-merging":{"type":"header","text":"Context Merging","value":"context-merging","line":520,"column":0,"depth":3},"testing":{"type":"header","text":"Testing","value":"testing","line":541,"column":0,"depth":2},"mock-logger":{"type":"header","text":"Mock Logger","value":"mock-logger","line":543,"column":0,"depth":3},"test-utilities":{"type":"header","text":"Test Utilities","value":"test-utilities","line":579,"column":0,"depth":3},"reset-singleton-for-tests":{"type":"header","text":"Reset Singleton for Tests","value":"reset-singleton-for-tests","line":598,"column":0,"depth":3},"best-practices":{"type":"header","text":"Best Practices","value":"best-practices","line":608,"column":0,"depth":2},"1-initialize-early":{"type":"header","text":"1. Initialize Early","value":"1-initialize-early","line":610,"column":0,"depth":3},"2-use-component-loggers":{"type":"header","text":"2. Use Component Loggers","value":"2-use-component-loggers","line":626,"column":0,"depth":3},"3-structure-your-context":{"type":"header","text":"3. Structure Your Context","value":"3-structure-your-context","line":643,"column":0,"depth":3},"4-log-at-appropriate-levels":{"type":"header","text":"4. Log at Appropriate Levels","value":"4-log-at-appropriate-levels","line":662,"column":0,"depth":3},"5-include-error-objects":{"type":"header","text":"5. Include Error Objects","value":"5-include-error-objects","line":671,"column":0,"depth":3},"6-use-timers-for-performance-tracking":{"type":"header","text":"6. Use Timers for Performance Tracking","value":"6-use-timers-for-performance-tracking","line":689,"column":0,"depth":3},"7-graceful-shutdown":{"type":"header","text":"7. Graceful Shutdown","value":"7-graceful-shutdown","line":713,"column":0,"depth":3},"8-avoid-logging-sensitive-data":{"type":"header","text":"8. Avoid Logging Sensitive Data","value":"8-avoid-logging-sensitive-data","line":729,"column":0,"depth":3},"json-lines-output":{"type":"header","text":"JSON Lines Output","value":"json-lines-output","line":744,"column":0,"depth":2},"implementation-files":{"type":"header","text":"Implementation Files","value":"implementation-files","line":755,"column":0,"depth":2},"core-implementation":{"type":"header","text":"Core Implementation","value":"core-implementation","line":757,"column":0,"depth":3},"error-handling-1":{"type":"header","text":"Error Handling","value":"error-handling-1","line":764,"column":0,"depth":3},"configuration-1":{"type":"header","text":"Configuration","value":"configuration-1","line":768,"column":0,"depth":3},"channels":{"type":"header","text":"Channels","value":"channels","line":774,"column":0,"depth":3},"utilities":{"type":"header","text":"Utilities","value":"utilities","line":778,"column":0,"depth":3},"testing-1":{"type":"header","text":"Testing","value":"testing-1","line":782,"column":0,"depth":3},"see-also":{"type":"header","text":"See Also","value":"see-also","line":787,"column":0,"depth":2}},"children":[],"parent":"sfgrcjcttxz7b3qov7efg3f","data":{}},"body":"<h1 id=\"logging-and-error-handling\">Logging and Error Handling<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#logging-and-error-handling\"></a></h1>\n<h1 id=\"logging-and-error-handling-1\">Logging and Error Handling<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#logging-and-error-handling-1\"></a></h1>\n<p>Developer guide for the <code>@semantic-flow/logging</code> package - a production-ready logging and error handling system for the Semantic Flow Node.js platform.</p>\n<h2 id=\"overview\">Overview<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#overview\"></a></h2>\n<p>The logging system provides:</p>\n<ul>\n<li><strong>Unified API</strong> for both CLI tools and long-running services</li>\n<li><strong>Structured logging</strong> with JSON Lines output format</li>\n<li><strong>Context propagation</strong> using AsyncLocalStorage</li>\n<li><strong>Type-safe error handling</strong> with custom error types</li>\n<li><strong>Multiple output channels</strong> (console, file, monitoring)</li>\n<li><strong>Performance tracking</strong> with built-in timers</li>\n<li><strong>Pure ESM</strong> with full TypeScript support</li>\n</ul>\n<h2 id=\"quick-start\">Quick Start<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#quick-start\"></a></h2>\n<h3 id=\"basic-usage\">Basic Usage<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#basic-usage\"></a></h3>\n<pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword module\">import</span> <span class=\"token imports\"><span class=\"token punctuation\">{</span> getLogger <span class=\"token punctuation\">}</span></span> <span class=\"token keyword module\">from</span> <span class=\"token string\">'@semantic-flow/logging'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> logger <span class=\"token operator\">=</span> <span class=\"token function\">getLogger</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nlogger<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">info</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Application started'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nlogger<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">debug</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Debug information'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> userId<span class=\"token operator\">:</span> <span class=\"token string\">'123'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nlogger<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">error</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Something went wrong'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\"><span class=\"token known-class-name class-name\">Error</span></span><span class=\"token punctuation\">(</span><span class=\"token string\">'Failed'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> operation<span class=\"token operator\">:</span> <span class=\"token string\">'db-query'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre>\n<h3 id=\"cli-tool-usage\">CLI Tool Usage<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#cli-tool-usage\"></a></h3>\n<pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword module\">import</span> <span class=\"token imports\"><span class=\"token punctuation\">{</span> createCliLogger <span class=\"token punctuation\">}</span></span> <span class=\"token keyword module\">from</span> <span class=\"token string\">'@semantic-flow/logging'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> logger <span class=\"token operator\">=</span> <span class=\"token function\">createCliLogger</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> \n  verbose<span class=\"token operator\">:</span> process<span class=\"token punctuation\">.</span><span class=\"token property-access\">argv</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">includes</span><span class=\"token punctuation\">(</span><span class=\"token string\">'--verbose'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  format<span class=\"token operator\">:</span> <span class=\"token string\">'pretty'</span> \n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nlogger<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">info</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Processing files...'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre>\n<h3 id=\"service-usage\">Service Usage<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#service-usage\"></a></h3>\n<pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword module\">import</span> <span class=\"token imports\"><span class=\"token punctuation\">{</span> createServiceLogger<span class=\"token punctuation\">,</span> <span class=\"token maybe-class-name\">ContextManager</span> <span class=\"token punctuation\">}</span></span> <span class=\"token keyword module\">from</span> <span class=\"token string\">'@semantic-flow/logging'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> logger <span class=\"token operator\">=</span> <span class=\"token function\">createServiceLogger</span><span class=\"token punctuation\">(</span><span class=\"token string\">'semantic-flow-api'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n  enableFileLogging<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n  enableMonitoring<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n  environment<span class=\"token operator\">:</span> process<span class=\"token punctuation\">.</span><span class=\"token property-access\">env</span><span class=\"token punctuation\">.</span><span class=\"token constant\">NODE_ENV</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// HTTP middleware with automatic context propagation</span>\napp<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">use</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>req<span class=\"token punctuation\">,</span> res<span class=\"token punctuation\">,</span> next<span class=\"token punctuation\">)</span> <span class=\"token arrow operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> context <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n    operation<span class=\"token operator\">:</span> <span class=\"token string\">'http-request'</span><span class=\"token punctuation\">,</span>\n    requestId<span class=\"token operator\">:</span> req<span class=\"token punctuation\">.</span><span class=\"token property-access\">id</span><span class=\"token punctuation\">,</span>\n    metadata<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> method<span class=\"token operator\">:</span> req<span class=\"token punctuation\">.</span><span class=\"token property-access\">method</span><span class=\"token punctuation\">,</span> path<span class=\"token operator\">:</span> req<span class=\"token punctuation\">.</span><span class=\"token property-access\">path</span> <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n  \n  <span class=\"token maybe-class-name\">ContextManager</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">run</span><span class=\"token punctuation\">(</span>context<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token arrow operator\">=></span> <span class=\"token punctuation\">{</span>\n    req<span class=\"token punctuation\">.</span><span class=\"token property-access\">logger</span> <span class=\"token operator\">=</span> logger<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">child</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> component<span class=\"token operator\">:</span> <span class=\"token string\">'http-handler'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">next</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre>\n<h3 id=\"component-scoped-logger\">Component-Scoped Logger<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#component-scoped-logger\"></a></h3>\n<pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword module\">import</span> <span class=\"token imports\"><span class=\"token punctuation\">{</span> getComponentLogger <span class=\"token punctuation\">}</span></span> <span class=\"token keyword module\">from</span> <span class=\"token string\">'@semantic-flow/logging'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// Automatically includes component name from file path</span>\n<span class=\"token keyword\">const</span> logger <span class=\"token operator\">=</span> <span class=\"token function\">getComponentLogger</span><span class=\"token punctuation\">(</span><span class=\"token keyword module\">import</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">meta</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">url</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nlogger<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">info</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Component initialized'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// Logs with component: 'my-module'</span>\n</code></pre>\n<h2 id=\"core-concepts\">Core Concepts<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#core-concepts\"></a></h2>\n<h3 id=\"log-levels\">Log Levels<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#log-levels\"></a></h3>\n<p>The system uses numeric log levels for easy comparison and filtering:</p>\n<pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword\">enum</span> <span class=\"token maybe-class-name\">LogLevel</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token constant\">TRACE</span> <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span>   <span class=\"token comment\">// Detailed trace information</span>\n  <span class=\"token constant\">DEBUG</span> <span class=\"token operator\">=</span> <span class=\"token number\">10</span><span class=\"token punctuation\">,</span>  <span class=\"token comment\">// Debug information</span>\n  <span class=\"token constant\">INFO</span> <span class=\"token operator\">=</span> <span class=\"token number\">20</span><span class=\"token punctuation\">,</span>   <span class=\"token comment\">// Informational messages</span>\n  <span class=\"token constant\">WARN</span> <span class=\"token operator\">=</span> <span class=\"token number\">30</span><span class=\"token punctuation\">,</span>   <span class=\"token comment\">// Warning messages</span>\n  <span class=\"token constant\">ERROR</span> <span class=\"token operator\">=</span> <span class=\"token number\">40</span><span class=\"token punctuation\">,</span>  <span class=\"token comment\">// Error messages</span>\n  <span class=\"token constant\">FATAL</span> <span class=\"token operator\">=</span> <span class=\"token number\">50</span>   <span class=\"token comment\">// Fatal errors that require attention</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<h3 id=\"log-context\">Log Context<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#log-context\"></a></h3>\n<p>Context is automatically merged and propagated:</p>\n<pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword\">interface</span> <span class=\"token class-name\"><span class=\"token maybe-class-name\">LogContext</span></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// Core identification</span>\n  operation<span class=\"token operator\">?</span><span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">;</span>\n  operationId<span class=\"token operator\">?</span><span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">;</span>\n  component<span class=\"token operator\">?</span><span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">function</span><span class=\"token operator\">?</span><span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">;</span>      <span class=\"token comment\">// Automatically captured calling function name</span>\n  \n  <span class=\"token comment\">// Semantic Flow specific</span>\n  meshId<span class=\"token operator\">?</span><span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">;</span>\n  nodeId<span class=\"token operator\">?</span><span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">;</span>\n  meshName<span class=\"token operator\">?</span><span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">;</span>\n  nodeName<span class=\"token operator\">?</span><span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">;</span>\n  \n  <span class=\"token comment\">// Performance tracking</span>\n  startTime<span class=\"token operator\">?</span><span class=\"token operator\">:</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">;</span>\n  duration<span class=\"token operator\">?</span><span class=\"token operator\">:</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">;</span>\n  memoryUsage<span class=\"token operator\">?</span><span class=\"token operator\">:</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">;</span>\n  \n  <span class=\"token comment\">// Request context</span>\n  requestId<span class=\"token operator\">?</span><span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">;</span>\n  userId<span class=\"token operator\">?</span><span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">;</span>\n  sessionId<span class=\"token operator\">?</span><span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">;</span>\n  \n  <span class=\"token comment\">// Flexible metadata</span>\n  tags<span class=\"token operator\">?</span><span class=\"token operator\">:</span> <span class=\"token maybe-class-name\">Record</span><span class=\"token operator\">&#x3C;</span><span class=\"token builtin\">string</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">string</span><span class=\"token operator\">></span><span class=\"token punctuation\">;</span>\n  metadata<span class=\"token operator\">?</span><span class=\"token operator\">:</span> <span class=\"token maybe-class-name\">Record</span><span class=\"token operator\">&#x3C;</span><span class=\"token builtin\">string</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">unknown</span><span class=\"token operator\">></span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<h4 id=\"function-name-capture\">Function Name Capture<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#function-name-capture\"></a></h4>\n<p>The logger can automatically capture the calling function or method name and include it in the log context. This feature is useful for debugging and tracing but has a performance cost.</p>\n<p><strong>Automatic Capture:</strong></p>\n<pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword\">const</span> logger <span class=\"token operator\">=</span> <span class=\"token function\">getLogger</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">async</span> <span class=\"token keyword\">function</span> <span class=\"token function\">processUserData</span><span class=\"token punctuation\">(</span>userId<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// Function name 'processUserData' automatically captured</span>\n  logger<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">info</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Starting user data processing'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> userId <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token comment\">// Logs: { function: 'processUserData', userId: '123', ... }</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<p><strong>Configuration:</strong></p>\n<pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token function\">initLogger</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  serviceName<span class=\"token operator\">:</span> <span class=\"token string\">'my-service'</span><span class=\"token punctuation\">,</span>\n  autoContext<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    captureFunctionName<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>  <span class=\"token comment\">// Enable function name capture</span>\n    includeTimestamp<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n    includeHostname<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n    includeProcessInfo<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre>\n<p><strong>Environment-Aware Defaults:</strong></p>\n<ul>\n<li><strong>Development</strong>: Function capture is enabled by default (<code>NODE_ENV !== 'production'</code>)</li>\n<li><strong>Production</strong>: Function capture is disabled by default for performance</li>\n<li><strong>Override</strong>: Can be explicitly enabled/disabled in configuration</li>\n</ul>\n<p><strong>Performance Considerations:</strong></p>\n<ul>\n<li>Function name capture uses stack trace parsing, which has a measurable performance cost</li>\n<li>In production environments with high-throughput logging, consider disabling this feature</li>\n<li>Enable selectively for debugging or development environments</li>\n<li>Manual context provides better control: <code>logger.info('msg', { function: 'myFunc' })</code></li>\n</ul>\n<p><strong>Examples:</strong></p>\n<pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token comment\">// Development mode - automatic capture</span>\nprocess<span class=\"token punctuation\">.</span><span class=\"token property-access\">env</span><span class=\"token punctuation\">.</span><span class=\"token constant\">NODE_ENV</span> <span class=\"token operator\">=</span> <span class=\"token string\">'development'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> logger <span class=\"token operator\">=</span> <span class=\"token function\">getLogger</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\"><span class=\"token maybe-class-name\">AuthService</span></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">async</span> <span class=\"token function\">login</span><span class=\"token punctuation\">(</span>credentials<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// Captures 'AuthService.login' automatically</span>\n    logger<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">info</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Login attempt'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> email<span class=\"token operator\">:</span> credentials<span class=\"token punctuation\">.</span><span class=\"token property-access\">email</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// Production mode - disabled by default</span>\nprocess<span class=\"token punctuation\">.</span><span class=\"token property-access\">env</span><span class=\"token punctuation\">.</span><span class=\"token constant\">NODE_ENV</span> <span class=\"token operator\">=</span> <span class=\"token string\">'production'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> prodLogger <span class=\"token operator\">=</span> <span class=\"token function\">getLogger</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">async</span> <span class=\"token keyword\">function</span> <span class=\"token function\">processPayment</span><span class=\"token punctuation\">(</span>orderId<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// No automatic function capture in production</span>\n  logger<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">info</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Processing payment'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> orderId <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// Explicit override - enabled in production</span>\n<span class=\"token keyword\">const</span> debugLogger <span class=\"token operator\">=</span> <span class=\"token function\">createLogger</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  serviceName<span class=\"token operator\">:</span> <span class=\"token string\">'payment-service'</span><span class=\"token punctuation\">,</span>\n  environment<span class=\"token operator\">:</span> <span class=\"token string\">'production'</span><span class=\"token punctuation\">,</span>\n  autoContext<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    captureFunctionName<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span>  <span class=\"token comment\">// Force enable for debugging</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre>\n<h3 id=\"child-loggers\">Child Loggers<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#child-loggers\"></a></h3>\n<p>Child loggers inherit and merge context immutably:</p>\n<pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword\">const</span> parentLogger <span class=\"token operator\">=</span> <span class=\"token function\">getLogger</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> childLogger <span class=\"token operator\">=</span> parentLogger<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">child</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> component<span class=\"token operator\">:</span> <span class=\"token string\">'auth'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> grandchildLogger <span class=\"token operator\">=</span> childLogger<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">withOperation</span><span class=\"token punctuation\">(</span><span class=\"token string\">'login'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'op-123'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// Each logger has its own context without affecting parents</span>\nchildLogger<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">info</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Auth module loaded'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\ngrandchildLogger<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">info</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Login attempt'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre>\n<h2 id=\"api-reference\">API Reference<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#api-reference\"></a></h2>\n<h3 id=\"logger-interface\">Logger Interface<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#logger-interface\"></a></h3>\n<pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword\">interface</span> <span class=\"token class-name\"><span class=\"token maybe-class-name\">Logger</span></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// Core logging methods</span>\n  <span class=\"token function\">trace</span><span class=\"token punctuation\">(</span>message<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">,</span> context<span class=\"token operator\">?</span><span class=\"token operator\">:</span> <span class=\"token maybe-class-name\">LogContext</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token keyword\">void</span><span class=\"token punctuation\">;</span>\n  <span class=\"token function\">debug</span><span class=\"token punctuation\">(</span>message<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">,</span> context<span class=\"token operator\">?</span><span class=\"token operator\">:</span> <span class=\"token maybe-class-name\">LogContext</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token keyword\">void</span><span class=\"token punctuation\">;</span>\n  <span class=\"token function\">info</span><span class=\"token punctuation\">(</span>message<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">,</span> context<span class=\"token operator\">?</span><span class=\"token operator\">:</span> <span class=\"token maybe-class-name\">LogContext</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token keyword\">void</span><span class=\"token punctuation\">;</span>\n  <span class=\"token function\">warn</span><span class=\"token punctuation\">(</span>message<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">,</span> context<span class=\"token operator\">?</span><span class=\"token operator\">:</span> <span class=\"token maybe-class-name\">LogContext</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token keyword\">void</span><span class=\"token punctuation\">;</span>\n  <span class=\"token function\">error</span><span class=\"token punctuation\">(</span>message<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">,</span> error<span class=\"token operator\">?</span><span class=\"token operator\">:</span> <span class=\"token known-class-name class-name\">Error</span><span class=\"token punctuation\">,</span> context<span class=\"token operator\">?</span><span class=\"token operator\">:</span> <span class=\"token maybe-class-name\">LogContext</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token keyword\">void</span><span class=\"token punctuation\">;</span>\n  <span class=\"token function\">fatal</span><span class=\"token punctuation\">(</span>message<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">,</span> error<span class=\"token operator\">?</span><span class=\"token operator\">:</span> <span class=\"token known-class-name class-name\">Error</span><span class=\"token punctuation\">,</span> context<span class=\"token operator\">?</span><span class=\"token operator\">:</span> <span class=\"token maybe-class-name\">LogContext</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token keyword\">void</span><span class=\"token punctuation\">;</span>\n  \n  <span class=\"token comment\">// Context management</span>\n  <span class=\"token function\">withContext</span><span class=\"token punctuation\">(</span>context<span class=\"token operator\">:</span> <span class=\"token maybe-class-name\">LogContext</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token maybe-class-name\">Logger</span><span class=\"token punctuation\">;</span>\n  <span class=\"token function\">withOperation</span><span class=\"token punctuation\">(</span>operation<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">,</span> operationId<span class=\"token operator\">?</span><span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token maybe-class-name\">Logger</span><span class=\"token punctuation\">;</span>\n  <span class=\"token function\">withComponent</span><span class=\"token punctuation\">(</span>component<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token maybe-class-name\">Logger</span><span class=\"token punctuation\">;</span>\n  <span class=\"token function\">child</span><span class=\"token punctuation\">(</span>context<span class=\"token operator\">:</span> <span class=\"token maybe-class-name\">LogContext</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token maybe-class-name\">Logger</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// Alias for withContext</span>\n  \n  <span class=\"token comment\">// Performance tracking</span>\n  <span class=\"token function\">startTimer</span><span class=\"token punctuation\">(</span>operation<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token maybe-class-name\">Timer</span><span class=\"token punctuation\">;</span>\n  \n  <span class=\"token comment\">// Error capture</span>\n  <span class=\"token function\">captureError</span><span class=\"token punctuation\">(</span>error<span class=\"token operator\">:</span> <span class=\"token builtin\">unknown</span><span class=\"token punctuation\">,</span> options<span class=\"token operator\">?</span><span class=\"token operator\">:</span> <span class=\"token maybe-class-name\">ErrorCaptureOptions</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token keyword\">void</span><span class=\"token punctuation\">;</span>\n  \n  <span class=\"token comment\">// Lifecycle</span>\n  <span class=\"token function\">flush</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token known-class-name class-name\">Promise</span><span class=\"token operator\">&#x3C;</span><span class=\"token keyword\">void</span><span class=\"token operator\">></span><span class=\"token punctuation\">;</span>\n  <span class=\"token function\">close</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token known-class-name class-name\">Promise</span><span class=\"token operator\">&#x3C;</span><span class=\"token keyword\">void</span><span class=\"token operator\">></span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<h3 id=\"factory-functions\">Factory Functions<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#factory-functions\"></a></h3>\n<h4 id=\"initloggerconfig\"><code>initLogger(config?)</code><a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#initloggerconfig\"></a></h4>\n<p>Initializes the global logger singleton. Call once at application startup.</p>\n<pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword module\">import</span> <span class=\"token imports\"><span class=\"token punctuation\">{</span> initLogger <span class=\"token punctuation\">}</span></span> <span class=\"token keyword module\">from</span> <span class=\"token string\">'@semantic-flow/logging'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token function\">initLogger</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  serviceName<span class=\"token operator\">:</span> <span class=\"token string\">'my-service'</span><span class=\"token punctuation\">,</span>\n  environment<span class=\"token operator\">:</span> <span class=\"token string\">'production'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token builtin\">console</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    enabled<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n    level<span class=\"token operator\">:</span> <span class=\"token maybe-class-name\">LogLevel</span><span class=\"token punctuation\">.</span><span class=\"token constant\">INFO</span><span class=\"token punctuation\">,</span>\n    format<span class=\"token operator\">:</span> <span class=\"token string\">'json'</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre>\n<h4 id=\"getlogger\"><code>getLogger()</code><a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#getlogger\"></a></h4>\n<p>Returns the global logger singleton. Automatically picks up AsyncLocalStorage context.</p>\n<pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword module\">import</span> <span class=\"token imports\"><span class=\"token punctuation\">{</span> getLogger <span class=\"token punctuation\">}</span></span> <span class=\"token keyword module\">from</span> <span class=\"token string\">'@semantic-flow/logging'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> logger <span class=\"token operator\">=</span> <span class=\"token function\">getLogger</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre>\n<h4 id=\"createloggerconfig\"><code>createLogger(config?)</code><a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#createloggerconfig\"></a></h4>\n<p>Creates a new, independent logger instance (non-singleton).</p>\n<pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword module\">import</span> <span class=\"token imports\"><span class=\"token punctuation\">{</span> createLogger <span class=\"token punctuation\">}</span></span> <span class=\"token keyword module\">from</span> <span class=\"token string\">'@semantic-flow/logging'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> customLogger <span class=\"token operator\">=</span> <span class=\"token function\">createLogger</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  serviceName<span class=\"token operator\">:</span> <span class=\"token string\">'custom-service'</span><span class=\"token punctuation\">,</span>\n  async<span class=\"token operator\">:</span> <span class=\"token boolean\">false</span> <span class=\"token comment\">// Synchronous logging</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre>\n<h4 id=\"createcliloggeroptions\"><code>createCliLogger(options?)</code><a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#createcliloggeroptions\"></a></h4>\n<p>Creates a logger optimized for CLI tools with pretty output.</p>\n<pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword module\">import</span> <span class=\"token imports\"><span class=\"token punctuation\">{</span> createCliLogger <span class=\"token punctuation\">}</span></span> <span class=\"token keyword module\">from</span> <span class=\"token string\">'@semantic-flow/logging'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> logger <span class=\"token operator\">=</span> <span class=\"token function\">createCliLogger</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  verbose<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>  <span class=\"token comment\">// Enable debug logging</span>\n  quiet<span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>   <span class=\"token comment\">// Disable info logging</span>\n  format<span class=\"token operator\">:</span> <span class=\"token string\">'pretty'</span> <span class=\"token comment\">// Use colored output</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre>\n<h4 id=\"createserviceloggerservicename-options\"><code>createServiceLogger(serviceName, options?)</code><a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#createserviceloggerservicename-options\"></a></h4>\n<p>Creates a logger optimized for long-running services with JSON output.</p>\n<pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword module\">import</span> <span class=\"token imports\"><span class=\"token punctuation\">{</span> createServiceLogger <span class=\"token punctuation\">}</span></span> <span class=\"token keyword module\">from</span> <span class=\"token string\">'@semantic-flow/logging'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> logger <span class=\"token operator\">=</span> <span class=\"token function\">createServiceLogger</span><span class=\"token punctuation\">(</span><span class=\"token string\">'api-server'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n  enableFileLogging<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n  enableMonitoring<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n  environment<span class=\"token operator\">:</span> <span class=\"token string\">'production'</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre>\n<h4 id=\"getcomponentloggersourceurl\"><code>getComponentLogger(sourceUrl)</code><a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#getcomponentloggersourceurl\"></a></h4>\n<p>Creates a component-scoped logger using <code>import.meta.url</code>.</p>\n<pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword module\">import</span> <span class=\"token imports\"><span class=\"token punctuation\">{</span> getComponentLogger <span class=\"token punctuation\">}</span></span> <span class=\"token keyword module\">from</span> <span class=\"token string\">'@semantic-flow/logging'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> logger <span class=\"token operator\">=</span> <span class=\"token function\">getComponentLogger</span><span class=\"token punctuation\">(</span><span class=\"token keyword module\">import</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">meta</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">url</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// Automatically includes component: 'mesh-processor' from file path</span>\n</code></pre>\n<h3 id=\"performance-tracking\">Performance Tracking<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#performance-tracking\"></a></h3>\n<pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword\">const</span> timer <span class=\"token operator\">=</span> logger<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">startTimer</span><span class=\"token punctuation\">(</span><span class=\"token string\">'data-processing'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// Do work...</span>\n\ntimer<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">checkpoint</span><span class=\"token punctuation\">(</span><span class=\"token string\">'validation-complete'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> recordCount<span class=\"token operator\">:</span> <span class=\"token number\">100</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// More work...</span>\n\ntimer<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">end</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> totalRecords<span class=\"token operator\">:</span> <span class=\"token number\">500</span><span class=\"token punctuation\">,</span> duration<span class=\"token operator\">:</span> <span class=\"token number\">1234</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre>\n<h2 id=\"configuration\">Configuration<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#configuration\"></a></h2>\n<h3 id=\"logger-configuration\">Logger Configuration<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#logger-configuration\"></a></h3>\n<pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword\">interface</span> <span class=\"token class-name\"><span class=\"token maybe-class-name\">LoggerConfig</span></span> <span class=\"token punctuation\">{</span>\n  serviceName<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">;</span>\n  serviceVersion<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">;</span>\n  environment<span class=\"token operator\">:</span> <span class=\"token string\">'development'</span> <span class=\"token operator\">|</span> <span class=\"token string\">'staging'</span> <span class=\"token operator\">|</span> <span class=\"token string\">'production'</span><span class=\"token punctuation\">;</span>\n  instanceId<span class=\"token operator\">?</span><span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">;</span>\n  \n  <span class=\"token comment\">// Channel configurations</span>\n  <span class=\"token builtin\">console</span><span class=\"token operator\">:</span> <span class=\"token maybe-class-name\">ChannelConfig</span><span class=\"token punctuation\">;</span>\n  file<span class=\"token operator\">:</span> <span class=\"token maybe-class-name\">ChannelConfig</span><span class=\"token punctuation\">;</span>\n  monitoring<span class=\"token operator\">:</span> <span class=\"token maybe-class-name\">ChannelConfig</span><span class=\"token punctuation\">;</span>\n  \n  <span class=\"token comment\">// Performance settings</span>\n  async<span class=\"token operator\">:</span> <span class=\"token builtin\">boolean</span><span class=\"token punctuation\">;</span>        <span class=\"token comment\">// Buffered writes vs synchronous</span>\n  bufferSize<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">;</span>    <span class=\"token comment\">// Buffer size for async writes</span>\n  flushInterval<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// Auto-flush interval (ms)</span>\n  \n  <span class=\"token comment\">// Auto-context settings</span>\n  autoContext<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    includeTimestamp<span class=\"token operator\">:</span> <span class=\"token builtin\">boolean</span><span class=\"token punctuation\">;</span>\n    includeHostname<span class=\"token operator\">:</span> <span class=\"token builtin\">boolean</span><span class=\"token punctuation\">;</span>\n    includeProcessInfo<span class=\"token operator\">:</span> <span class=\"token builtin\">boolean</span><span class=\"token punctuation\">;</span>\n    captureFunctionName<span class=\"token operator\">:</span> <span class=\"token builtin\">boolean</span><span class=\"token punctuation\">;</span>  <span class=\"token comment\">// Enable automatic function name capture</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<p><strong>Auto-Context Configuration Details:</strong></p>\n<ul>\n<li><code>includeTimestamp</code>: Adds timestamp to every log entry (default: <code>true</code>)</li>\n<li><code>includeHostname</code>: Includes hostname in log entries (default: <code>true</code>)</li>\n<li><code>includeProcessInfo</code>: Includes process ID in log entries (default: <code>true</code>)</li>\n<li><code>captureFunctionName</code>: Automatically captures calling function/method name (default: <code>NODE_ENV !== 'production'</code>)\n<ul>\n<li><strong>Enabled by default in development</strong> for better debugging</li>\n<li><strong>Disabled by default in production</strong> for performance</li>\n<li>Can be explicitly overridden in configuration</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"channel-configuration\">Channel Configuration<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#channel-configuration\"></a></h3>\n<pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword\">interface</span> <span class=\"token class-name\"><span class=\"token maybe-class-name\">ChannelConfig</span></span> <span class=\"token punctuation\">{</span>\n  enabled<span class=\"token operator\">:</span> <span class=\"token builtin\">boolean</span><span class=\"token punctuation\">;</span>\n  level<span class=\"token operator\">:</span> <span class=\"token maybe-class-name\">LogLevel</span><span class=\"token punctuation\">;</span>\n  format<span class=\"token operator\">:</span> <span class=\"token string\">'json'</span> <span class=\"token operator\">|</span> <span class=\"token string\">'pretty'</span> <span class=\"token operator\">|</span> <span class=\"token string\">'compact'</span><span class=\"token punctuation\">;</span>\n  \n  <span class=\"token comment\">// Channel-specific options</span>\n  <span class=\"token builtin\">console</span><span class=\"token operator\">?</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    colors<span class=\"token operator\">?</span><span class=\"token operator\">:</span> <span class=\"token builtin\">boolean</span><span class=\"token punctuation\">;</span>\n    timestamps<span class=\"token operator\">?</span><span class=\"token operator\">:</span> <span class=\"token builtin\">boolean</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n  file<span class=\"token operator\">?</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    path<span class=\"token operator\">?</span><span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">;</span>\n    maxSize<span class=\"token operator\">?</span><span class=\"token operator\">:</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">;</span>\n    maxFiles<span class=\"token operator\">?</span><span class=\"token operator\">:</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">;</span>\n    rotationStrategy<span class=\"token operator\">?</span><span class=\"token operator\">:</span> <span class=\"token string\">'time'</span> <span class=\"token operator\">|</span> <span class=\"token string\">'size'</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n  monitoring<span class=\"token operator\">?</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    provider<span class=\"token operator\">:</span> <span class=\"token string\">'sentry'</span> <span class=\"token operator\">|</span> <span class=\"token string\">'datadog'</span> <span class=\"token operator\">|</span> <span class=\"token string\">'newrelic'</span><span class=\"token punctuation\">;</span>\n    dsn<span class=\"token operator\">?</span><span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">;</span>\n    environment<span class=\"token operator\">?</span><span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">;</span>\n    sampleRate<span class=\"token operator\">?</span><span class=\"token operator\">:</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<h3 id=\"environment-variables\">Environment Variables<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#environment-variables\"></a></h3>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># Service identification</span>\n<span class=\"token assign-left variable\">SF_SERVICE_NAME</span><span class=\"token operator\">=</span>semantic-flow-service\n<span class=\"token assign-left variable\">SF_SERVICE_VERSION</span><span class=\"token operator\">=</span><span class=\"token number\">2.0</span>.0\n<span class=\"token assign-left variable\">SF_ENVIRONMENT</span><span class=\"token operator\">=</span>production\n\n<span class=\"token comment\"># Console logging</span>\n<span class=\"token assign-left variable\">SF_LOG_CONSOLE_ENABLED</span><span class=\"token operator\">=</span>true\n<span class=\"token assign-left variable\">SF_LOG_CONSOLE_LEVEL</span><span class=\"token operator\">=</span>info\n<span class=\"token assign-left variable\">SF_LOG_CONSOLE_FORMAT</span><span class=\"token operator\">=</span>pretty\n\n<span class=\"token comment\"># File logging</span>\n<span class=\"token assign-left variable\">SF_LOG_FILE_ENABLED</span><span class=\"token operator\">=</span>true\n<span class=\"token assign-left variable\">SF_LOG_FILE_PATH</span><span class=\"token operator\">=</span>./logs/sf-service.log\n<span class=\"token assign-left variable\">SF_LOG_FILE_LEVEL</span><span class=\"token operator\">=</span>debug\n\n<span class=\"token comment\"># Monitoring</span>\n<span class=\"token assign-left variable\">SF_LOG_MONITORING_ENABLED</span><span class=\"token operator\">=</span>true\n<span class=\"token assign-left variable\">SF_LOG_MONITORING_PROVIDER</span><span class=\"token operator\">=</span>sentry\n<span class=\"token assign-left variable\">SF_LOG_MONITORING_DSN</span><span class=\"token operator\">=</span>https://<span class=\"token punctuation\">..</span>.\n\n<span class=\"token comment\"># Auto-context settings</span>\n<span class=\"token assign-left variable\">SF_LOG_AUTO_CONTEXT_CAPTURE_FUNCTION_NAME</span><span class=\"token operator\">=</span>true  <span class=\"token comment\"># Enable function name capture</span>\n</code></pre>\n<h2 id=\"error-handling\">Error Handling<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#error-handling\"></a></h2>\n<h3 id=\"error-types\">Error Types<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#error-types\"></a></h3>\n<p>The system provides typed error classes with automatic context capture:</p>\n<pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword module\">import</span> <span class=\"token punctuation\">{</span> \n  <span class=\"token known-class-name class-name\">SemanticFlowError</span><span class=\"token punctuation\">,</span>\n  <span class=\"token known-class-name class-name\">ValidationError</span><span class=\"token punctuation\">,</span>\n  <span class=\"token known-class-name class-name\">ConfigurationError</span><span class=\"token punctuation\">,</span>\n  <span class=\"token known-class-name class-name\">MeshProcessingError</span><span class=\"token punctuation\">,</span>\n  <span class=\"token known-class-name class-name\">ApiError</span>\n<span class=\"token punctuation\">}</span> <span class=\"token keyword module\">from</span> <span class=\"token string\">'@semantic-flow/logging'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// Throw typed errors</span>\n<span class=\"token keyword control-flow\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\"><span class=\"token known-class-name class-name\">ValidationError</span></span><span class=\"token punctuation\">(</span><span class=\"token string\">'Invalid input'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> field<span class=\"token operator\">:</span> <span class=\"token string\">'email'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword control-flow\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\"><span class=\"token known-class-name class-name\">ApiError</span></span><span class=\"token punctuation\">(</span><span class=\"token string\">'Not found'</span><span class=\"token punctuation\">,</span> <span class=\"token number\">404</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> resource<span class=\"token operator\">:</span> <span class=\"token string\">'user'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// Custom error types</span>\n<span class=\"token keyword module\">import</span> <span class=\"token imports\"><span class=\"token punctuation\">{</span> createErrorType <span class=\"token punctuation\">}</span></span> <span class=\"token keyword module\">from</span> <span class=\"token string\">'@semantic-flow/logging'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token known-class-name class-name\">DatabaseError</span> <span class=\"token operator\">=</span> <span class=\"token function\">createErrorType</span><span class=\"token punctuation\">(</span><span class=\"token string\">'DatabaseError'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'DB_ERROR'</span><span class=\"token punctuation\">,</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword control-flow\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\"><span class=\"token known-class-name class-name\">DatabaseError</span></span><span class=\"token punctuation\">(</span><span class=\"token string\">'Connection failed'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> host<span class=\"token operator\">:</span> <span class=\"token string\">'localhost'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre>\n<h3 id=\"error-capture\">Error Capture<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#error-capture\"></a></h3>\n<pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword module\">import</span> <span class=\"token imports\"><span class=\"token punctuation\">{</span> captureError <span class=\"token punctuation\">}</span></span> <span class=\"token keyword module\">from</span> <span class=\"token string\">'@semantic-flow/logging'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword control-flow\">try</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword control-flow\">await</span> <span class=\"token function\">riskyOperation</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span> <span class=\"token keyword control-flow\">catch</span> <span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">captureError</span><span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n    message<span class=\"token operator\">:</span> <span class=\"token string\">'Operation failed'</span><span class=\"token punctuation\">,</span>\n    context<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> operation<span class=\"token operator\">:</span> <span class=\"token string\">'risky-op'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    includeStackTrace<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n    reportToMonitoring<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token comment\">// Continue with fallback logic</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<h3 id=\"error-properties\">Error Properties<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#error-properties\"></a></h3>\n<pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword\">class</span> <span class=\"token class-name\"><span class=\"token known-class-name class-name\">SemanticFlowError</span></span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\"><span class=\"token known-class-name class-name\">Error</span></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">readonly</span> code<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">;</span>           <span class=\"token comment\">// Error code (e.g., 'VALIDATION_ERROR')</span>\n  <span class=\"token keyword\">readonly</span> context<span class=\"token operator\">:</span> <span class=\"token maybe-class-name\">Record</span><span class=\"token operator\">&#x3C;</span><span class=\"token builtin\">string</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">unknown</span><span class=\"token operator\">></span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// Additional context</span>\n  <span class=\"token keyword\">readonly</span> timestamp<span class=\"token operator\">:</span> <span class=\"token known-class-name class-name\">Date</span><span class=\"token punctuation\">;</span>        <span class=\"token comment\">// When the error occurred</span>\n  <span class=\"token keyword\">readonly</span> recoverable<span class=\"token operator\">:</span> <span class=\"token builtin\">boolean</span><span class=\"token punctuation\">;</span>   <span class=\"token comment\">// Whether recovery is possible</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<h2 id=\"context-management\">Context Management<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#context-management\"></a></h2>\n<h3 id=\"asynclocalstorage\">AsyncLocalStorage<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#asynclocalstorage\"></a></h3>\n<p>The system uses AsyncLocalStorage for automatic context propagation across async operations:</p>\n<pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword module\">import</span> <span class=\"token imports\"><span class=\"token punctuation\">{</span> <span class=\"token maybe-class-name\">ContextManager</span> <span class=\"token punctuation\">}</span></span> <span class=\"token keyword module\">from</span> <span class=\"token string\">'@semantic-flow/logging'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> requestContext <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span> \n  requestId<span class=\"token operator\">:</span> <span class=\"token string\">'req-123'</span><span class=\"token punctuation\">,</span> \n  userId<span class=\"token operator\">:</span> <span class=\"token string\">'user-456'</span> \n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token maybe-class-name\">ContextManager</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">run</span><span class=\"token punctuation\">(</span>requestContext<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token arrow operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// All logging within this scope automatically includes the context</span>\n  logger<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">info</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Processing request'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> \n  <span class=\"token comment\">// Logs: { requestId: 'req-123', userId: 'user-456', ... }</span>\n  \n  <span class=\"token keyword control-flow\">await</span> <span class=\"token function\">processRequest</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre>\n<h3 id=\"context-merging\">Context Merging<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#context-merging\"></a></h3>\n<p>Context is merged hierarchically:</p>\n<pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token comment\">// Global context</span>\n<span class=\"token keyword\">const</span> globalLogger <span class=\"token operator\">=</span> <span class=\"token function\">getLogger</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// Component context</span>\n<span class=\"token keyword\">const</span> componentLogger <span class=\"token operator\">=</span> globalLogger<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">child</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> component<span class=\"token operator\">:</span> <span class=\"token string\">'auth'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// Operation context</span>\n<span class=\"token keyword\">const</span> operationLogger <span class=\"token operator\">=</span> componentLogger<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">withOperation</span><span class=\"token punctuation\">(</span><span class=\"token string\">'login'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// Call context</span>\noperationLogger<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">info</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Login successful'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> userId<span class=\"token operator\">:</span> <span class=\"token string\">'123'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// Final context includes all levels:</span>\n<span class=\"token comment\">// { component: 'auth', operation: 'login', userId: '123', ... }</span>\n</code></pre>\n<h2 id=\"testing\">Testing<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#testing\"></a></h2>\n<h3 id=\"mock-logger\">Mock Logger<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#mock-logger\"></a></h3>\n<p>Use the <code>MockLogger</code> for testing:</p>\n<pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword module\">import</span> <span class=\"token imports\"><span class=\"token punctuation\">{</span> <span class=\"token maybe-class-name\">LoggerTestUtils</span><span class=\"token punctuation\">,</span> <span class=\"token maybe-class-name\">MockLogger</span> <span class=\"token punctuation\">}</span></span> <span class=\"token keyword module\">from</span> <span class=\"token string\">'@semantic-flow/logging'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword module\">import</span> <span class=\"token imports\"><span class=\"token punctuation\">{</span> describe<span class=\"token punctuation\">,</span> it<span class=\"token punctuation\">,</span> expect<span class=\"token punctuation\">,</span> beforeEach <span class=\"token punctuation\">}</span></span> <span class=\"token keyword module\">from</span> <span class=\"token string\">'vitest'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token function\">describe</span><span class=\"token punctuation\">(</span><span class=\"token string\">'My Module'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token arrow operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">let</span> mockLogger<span class=\"token operator\">:</span> <span class=\"token maybe-class-name\">MockLogger</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token function\">beforeEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token arrow operator\">=></span> <span class=\"token punctuation\">{</span>\n    mockLogger <span class=\"token operator\">=</span> <span class=\"token maybe-class-name\">LoggerTestUtils</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">createMockLogger</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      serviceName<span class=\"token operator\">:</span> <span class=\"token string\">'test-service'</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token function\">it</span><span class=\"token punctuation\">(</span><span class=\"token string\">'should log messages correctly'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token arrow operator\">=></span> <span class=\"token punctuation\">{</span>\n    mockLogger<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">info</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Test message'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> userId<span class=\"token operator\">:</span> <span class=\"token string\">'123'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    \n    <span class=\"token keyword\">const</span> entry <span class=\"token operator\">=</span> mockLogger<span class=\"token punctuation\">.</span><span class=\"token property-access\">mockChannel</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">entries</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">expect</span><span class=\"token punctuation\">(</span>entry<span class=\"token punctuation\">.</span><span class=\"token property-access\">level</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">toBe</span><span class=\"token punctuation\">(</span><span class=\"token maybe-class-name\">LogLevel</span><span class=\"token punctuation\">.</span><span class=\"token constant\">INFO</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">expect</span><span class=\"token punctuation\">(</span>entry<span class=\"token punctuation\">.</span><span class=\"token property-access\">message</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">toBe</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Test message'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">expect</span><span class=\"token punctuation\">(</span>entry<span class=\"token punctuation\">.</span><span class=\"token property-access\">context</span><span class=\"token operator\">?.</span>userId<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">toBe</span><span class=\"token punctuation\">(</span><span class=\"token string\">'123'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token function\">it</span><span class=\"token punctuation\">(</span><span class=\"token string\">'should capture errors'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token arrow operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> error <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\"><span class=\"token known-class-name class-name\">Error</span></span><span class=\"token punctuation\">(</span><span class=\"token string\">'Test error'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    mockLogger<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">captureError</span><span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    \n    <span class=\"token function\">expect</span><span class=\"token punctuation\">(</span>mockLogger<span class=\"token punctuation\">.</span><span class=\"token property-access\">capturedErrors</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">toHaveLength</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">expect</span><span class=\"token punctuation\">(</span>mockLogger<span class=\"token punctuation\">.</span><span class=\"token property-access\">capturedErrors</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">error</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">toBe</span><span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre>\n<h3 id=\"test-utilities\">Test Utilities<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#test-utilities\"></a></h3>\n<pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token comment\">// Find logs by level</span>\n<span class=\"token keyword\">const</span> errors <span class=\"token operator\">=</span> mockLogger<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">findLogsByLevel</span><span class=\"token punctuation\">(</span><span class=\"token maybe-class-name\">LogLevel</span><span class=\"token punctuation\">.</span><span class=\"token constant\">ERROR</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// Find logs by component</span>\n<span class=\"token keyword\">const</span> authLogs <span class=\"token operator\">=</span> mockLogger<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">findLogsByComponent</span><span class=\"token punctuation\">(</span><span class=\"token string\">'auth'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// Find logs by operation</span>\n<span class=\"token keyword\">const</span> loginLogs <span class=\"token operator\">=</span> mockLogger<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">findLogsByOperation</span><span class=\"token punctuation\">(</span><span class=\"token string\">'login'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// Check for specific error codes</span>\n<span class=\"token keyword\">const</span> hasValidationError <span class=\"token operator\">=</span> mockLogger<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">hasErrorWithCode</span><span class=\"token punctuation\">(</span><span class=\"token string\">'VALIDATION_ERROR'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// Clear logs between tests</span>\nmockLogger<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">clearLogs</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre>\n<h3 id=\"reset-singleton-for-tests\">Reset Singleton for Tests<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#reset-singleton-for-tests\"></a></h3>\n<pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword module\">import</span> <span class=\"token imports\"><span class=\"token punctuation\">{</span> __resetLoggerForTests <span class=\"token punctuation\">}</span></span> <span class=\"token keyword module\">from</span> <span class=\"token string\">'@semantic-flow/logging'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token function\">beforeEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token arrow operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">__resetLoggerForTests</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre>\n<h2 id=\"best-practices\">Best Practices<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#best-practices\"></a></h2>\n<h3 id=\"1-initialize-early\">1. Initialize Early<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#1-initialize-early\"></a></h3>\n<p>Initialize the logger at application startup:</p>\n<pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token comment\">// index.ts</span>\n<span class=\"token keyword module\">import</span> <span class=\"token imports\"><span class=\"token punctuation\">{</span> initLogger <span class=\"token punctuation\">}</span></span> <span class=\"token keyword module\">from</span> <span class=\"token string\">'@semantic-flow/logging'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token function\">initLogger</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  serviceName<span class=\"token operator\">:</span> process<span class=\"token punctuation\">.</span><span class=\"token property-access\">env</span><span class=\"token punctuation\">.</span><span class=\"token constant\">SERVICE_NAME</span> <span class=\"token operator\">||</span> <span class=\"token string\">'my-service'</span><span class=\"token punctuation\">,</span>\n  environment<span class=\"token operator\">:</span> process<span class=\"token punctuation\">.</span><span class=\"token property-access\">env</span><span class=\"token punctuation\">.</span><span class=\"token constant\">NODE_ENV</span> <span class=\"token keyword module\">as</span> <span class=\"token builtin\">any</span> <span class=\"token operator\">||</span> <span class=\"token string\">'development'</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// Rest of application...</span>\n</code></pre>\n<h3 id=\"2-use-component-loggers\">2. Use Component Loggers<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#2-use-component-loggers\"></a></h3>\n<p>Create component-scoped loggers for better traceability:</p>\n<pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token comment\">// auth-service.ts</span>\n<span class=\"token keyword module\">import</span> <span class=\"token imports\"><span class=\"token punctuation\">{</span> getComponentLogger <span class=\"token punctuation\">}</span></span> <span class=\"token keyword module\">from</span> <span class=\"token string\">'@semantic-flow/logging'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> logger <span class=\"token operator\">=</span> <span class=\"token function\">getComponentLogger</span><span class=\"token punctuation\">(</span><span class=\"token keyword module\">import</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">meta</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">url</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword module\">export</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\"><span class=\"token maybe-class-name\">AuthService</span></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">login</span><span class=\"token punctuation\">(</span>credentials<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    logger<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">info</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Login attempt'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> email<span class=\"token operator\">:</span> credentials<span class=\"token punctuation\">.</span><span class=\"token property-access\">email</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<h3 id=\"3-structure-your-context\">3. Structure Your Context<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#3-structure-your-context\"></a></h3>\n<p>Use consistent context keys across your application:</p>\n<pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token comment\">// Good: Consistent structure</span>\nlogger<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">info</span><span class=\"token punctuation\">(</span><span class=\"token string\">'User created'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n  operation<span class=\"token operator\">:</span> <span class=\"token string\">'user-creation'</span><span class=\"token punctuation\">,</span>\n  metadata<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> userId<span class=\"token operator\">:</span> <span class=\"token string\">'123'</span><span class=\"token punctuation\">,</span> email<span class=\"token operator\">:</span> <span class=\"token string\">'user@example.com'</span> <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// Avoid: Flat, inconsistent structure</span>\nlogger<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">info</span><span class=\"token punctuation\">(</span><span class=\"token string\">'User created'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n  userId<span class=\"token operator\">:</span> <span class=\"token string\">'123'</span><span class=\"token punctuation\">,</span>\n  email<span class=\"token operator\">:</span> <span class=\"token string\">'user@example.com'</span><span class=\"token punctuation\">,</span>\n  op<span class=\"token operator\">:</span> <span class=\"token string\">'create-user'</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre>\n<h3 id=\"4-log-at-appropriate-levels\">4. Log at Appropriate Levels<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#4-log-at-appropriate-levels\"></a></h3>\n<ul>\n<li><strong>TRACE</strong>: Very detailed debugging (rarely used in production)</li>\n<li><strong>DEBUG</strong>: Detailed debugging for development</li>\n<li><strong>INFO</strong>: Normal application flow</li>\n<li><strong>WARN</strong>: Potentially harmful situations</li>\n<li><strong>ERROR</strong>: Error events that might still allow the app to continue</li>\n<li><strong>FATAL</strong>: Severe errors that will likely abort the application</li>\n</ul>\n<h3 id=\"5-include-error-objects\">5. Include Error Objects<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#5-include-error-objects\"></a></h3>\n<p>Always include the error object when logging errors:</p>\n<pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token comment\">// Good: Includes error object and context</span>\n<span class=\"token keyword control-flow\">try</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword control-flow\">await</span> <span class=\"token function\">operation</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span> <span class=\"token keyword control-flow\">catch</span> <span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  logger<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">error</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Operation failed'</span><span class=\"token punctuation\">,</span> error<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> operation<span class=\"token operator\">:</span> <span class=\"token string\">'data-sync'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// Bad: Only logs message</span>\n<span class=\"token keyword control-flow\">catch</span> <span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  logger<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">error</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Operation failed: </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>error<span class=\"token punctuation\">.</span><span class=\"token property-access\">message</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<h3 id=\"6-use-timers-for-performance-tracking\">6. Use Timers for Performance Tracking<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#6-use-timers-for-performance-tracking\"></a></h3>\n<p>Track operation performance consistently:</p>\n<pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword\">async</span> <span class=\"token keyword\">function</span> <span class=\"token function\">processData</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> timer <span class=\"token operator\">=</span> logger<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">startTimer</span><span class=\"token punctuation\">(</span><span class=\"token string\">'data-processing'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  \n  <span class=\"token keyword control-flow\">try</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword control-flow\">await</span> <span class=\"token function\">validateData</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    timer<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">checkpoint</span><span class=\"token punctuation\">(</span><span class=\"token string\">'validation-complete'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    \n    <span class=\"token keyword control-flow\">await</span> <span class=\"token function\">transformData</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    timer<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">checkpoint</span><span class=\"token punctuation\">(</span><span class=\"token string\">'transformation-complete'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    \n    <span class=\"token keyword control-flow\">await</span> <span class=\"token function\">saveData</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    timer<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">end</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> recordCount<span class=\"token operator\">:</span> data<span class=\"token punctuation\">.</span><span class=\"token property-access\">length</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword control-flow\">catch</span> <span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    timer<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">end</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> error<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword control-flow\">throw</span> error<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<h3 id=\"7-graceful-shutdown\">7. Graceful Shutdown<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#7-graceful-shutdown\"></a></h3>\n<p>Ensure logs are flushed on shutdown:</p>\n<pre class=\"language-typescript\"><code class=\"language-typescript\">process<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">on</span><span class=\"token punctuation\">(</span><span class=\"token string\">'SIGTERM'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token arrow operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword control-flow\">await</span> <span class=\"token function\">getLogger</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">flush</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  process<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">exit</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nprocess<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">on</span><span class=\"token punctuation\">(</span><span class=\"token string\">'SIGINT'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token arrow operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword control-flow\">await</span> <span class=\"token function\">getLogger</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">flush</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  process<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">exit</span><span class=\"token punctuation\">(</span><span class=\"token number\">130</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre>\n<h3 id=\"8-avoid-logging-sensitive-data\">8. Avoid Logging Sensitive Data<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#8-avoid-logging-sensitive-data\"></a></h3>\n<p>Redact sensitive information:</p>\n<pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token comment\">// Bad: Logs password</span>\nlogger<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">debug</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Login attempt'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> username<span class=\"token punctuation\">,</span> password <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// Good: Redacts password</span>\nlogger<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">debug</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Login attempt'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> \n  username<span class=\"token punctuation\">,</span> \n  passwordLength<span class=\"token operator\">:</span> password<span class=\"token punctuation\">.</span><span class=\"token property-access\">length</span> \n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre>\n<h2 id=\"json-lines-output\">JSON Lines Output<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#json-lines-output\"></a></h2>\n<p>All structured logs use JSON Lines format (newline-delimited JSON):</p>\n<pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span><span class=\"token property\">\"timestamp\"</span><span class=\"token operator\">:</span><span class=\"token number\">1699027200000</span><span class=\"token punctuation\">,</span><span class=\"token property\">\"level\"</span><span class=\"token operator\">:</span><span class=\"token number\">20</span><span class=\"token punctuation\">,</span><span class=\"token property\">\"message\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"Server started\"</span><span class=\"token punctuation\">,</span><span class=\"token property\">\"service\"</span><span class=\"token operator\">:</span><span class=\"token punctuation\">{</span><span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"api\"</span><span class=\"token punctuation\">,</span><span class=\"token property\">\"version\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"1.0.0\"</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span><span class=\"token property\">\"pid\"</span><span class=\"token operator\">:</span><span class=\"token number\">12345</span><span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">{</span><span class=\"token property\">\"timestamp\"</span><span class=\"token operator\">:</span><span class=\"token number\">1699027201000</span><span class=\"token punctuation\">,</span><span class=\"token property\">\"level\"</span><span class=\"token operator\">:</span><span class=\"token number\">40</span><span class=\"token punctuation\">,</span><span class=\"token property\">\"message\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"Database connection failed\"</span><span class=\"token punctuation\">,</span><span class=\"token property\">\"error\"</span><span class=\"token operator\">:</span><span class=\"token punctuation\">{</span><span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"Error\"</span><span class=\"token punctuation\">,</span><span class=\"token property\">\"message\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"Connection timeout\"</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span><span class=\"token property\">\"service\"</span><span class=\"token operator\">:</span><span class=\"token punctuation\">{</span><span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"api\"</span><span class=\"token punctuation\">,</span><span class=\"token property\">\"version\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"1.0.0\"</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span><span class=\"token property\">\"pid\"</span><span class=\"token operator\">:</span><span class=\"token number\">12345</span><span class=\"token punctuation\">}</span>\n</code></pre>\n<p>This format is ideal for log processors like FluentBit, Loki, or Elasticsearch.</p>\n<h2 id=\"implementation-files\">Implementation Files<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#implementation-files\"></a></h2>\n<h3 id=\"core-implementation\">Core Implementation<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#core-implementation\"></a></h3>\n<ul>\n<li><a href=\"/sflo/../shared/logging/src/core/types.ts\"><code>shared/logging/src/core/types.ts</code></a> - Type definitions</li>\n<li><a href=\"/sflo/../shared/logging/src/core/logger.ts\"><code>shared/logging/src/core/logger.ts</code></a> - Logger implementation</li>\n<li><a href=\"/sflo/../shared/logging/src/core/context.ts\"><code>shared/logging/src/core/context.ts</code></a> - Context management</li>\n<li><a href=\"/sflo/../shared/logging/src/core/formatters.ts\"><code>shared/logging/src/core/formatters.ts</code></a> - Formatting utilities</li>\n</ul>\n<h3 id=\"error-handling-1\">Error Handling<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#error-handling-1\"></a></h3>\n<ul>\n<li><a href=\"/sflo/../shared/logging/src/errors/types.ts\"><code>shared/logging/src/errors/types.ts</code></a> - Error types and factory</li>\n</ul>\n<h3 id=\"configuration-1\">Configuration<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#configuration-1\"></a></h3>\n<ul>\n<li><a href=\"/sflo/../shared/logging/src/config/loader.ts\"><code>shared/logging/src/config/loader.ts</code></a> - Config loader</li>\n<li><a href=\"/sflo/../shared/logging/src/config/defaults.ts\"><code>shared/logging/src/config/defaults.ts</code></a> - Default config</li>\n<li><a href=\"/sflo/../shared/logging/src/config/schema.ts\"><code>shared/logging/src/config/schema.ts</code></a> - Config schema</li>\n</ul>\n<h3 id=\"channels\">Channels<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#channels\"></a></h3>\n<ul>\n<li><a href=\"/sflo/../shared/logging/src/channels/console.ts\"><code>shared/logging/src/channels/console.ts</code></a> - Console output</li>\n</ul>\n<h3 id=\"utilities\">Utilities<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#utilities\"></a></h3>\n<ul>\n<li><a href=\"/sflo/../shared/logging/src/utils/stack-trace.ts\"><code>shared/logging/src/utils/stack-trace.ts</code></a> - Stack trace parsing and function name capture</li>\n</ul>\n<h3 id=\"testing-1\">Testing<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#testing-1\"></a></h3>\n<ul>\n<li><a href=\"/sflo/../shared/logging/src/utils/testing.ts\"><code>shared/logging/src/utils/testing.ts</code></a> - Test utilities</li>\n<li><a href=\"/sflo/../shared/logging/src/__tests__/core.test.ts\"><code>shared/logging/src/__tests__/core.test.ts</code></a> - Core tests</li>\n</ul>\n<h2 id=\"see-also\">See Also<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#see-also\"></a></h2>\n<ul>\n<li><a href=\"/sflo/task.2025-11-04-shared-logging-and-errorhandling.md\">Task Specification</a> - Full system specification</li>\n<li><a href=\"/sflo/dev.general-guidance.md\">Developer General Guidance</a> - General development guidelines</li>\n<li><a href=\"/sflo/dev.patterns.md\">Developer Patterns</a> - Common development patterns</li>\n</ul>\n<hr>\n<strong>Backlinks</strong>\n<ul>\n<li><a href=\"/sflo/notes/i9v5cbqq2zqfhrjcolq48df\">Patterns</a></li>\n</ul>","noteIndex":{"id":"voy7zrf0f6bs86m02uadhaf","title":"Semantic Flow Documentation","desc":"","updated":1756155165637,"created":1755709990079,"custom":{"nav_order":0,"permalink":"/"},"fname":"root","type":"note","vault":{"fsPath":"documentation","selfContained":false,"name":"sflo"},"contentHash":"98cbbdb73a40d62308166fed9c2f594f","links":[{"type":"wiki","from":{"fname":"root","id":"voy7zrf0f6bs86m02uadhaf","vaultName":"sflo"},"value":"now","position":{"start":{"line":4,"column":1,"offset":107},"end":{"line":4,"column":8,"offset":114},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"now"}},{"type":"wiki","from":{"fname":"root","id":"voy7zrf0f6bs86m02uadhaf","vaultName":"sflo"},"value":"todo","position":{"start":{"line":4,"column":11,"offset":117},"end":{"line":4,"column":19,"offset":125},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"todo"}},{"type":"wiki","from":{"fname":"root","id":"voy7zrf0f6bs86m02uadhaf","vaultName":"sflo"},"value":"principle","position":{"start":{"line":4,"column":22,"offset":128},"end":{"line":4,"column":35,"offset":141},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"principle"}},{"type":"wiki","from":{"fname":"root","id":"voy7zrf0f6bs86m02uadhaf","vaultName":"sflo"},"value":"dev.contributor.djradon.dev-log","position":{"start":{"line":4,"column":38,"offset":144},"end":{"line":4,"column":73,"offset":179},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"dev.contributor.djradon.dev-log"}},{"type":"wiki","from":{"fname":"root","id":"voy7zrf0f6bs86m02uadhaf","vaultName":"sflo"},"value":"concept.single-mesh-repo","position":{"start":{"line":10,"column":1,"offset":498},"end":{"line":10,"column":29,"offset":526},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"concept.single-mesh-repo"}},{"type":"wiki","from":{"fname":"root","id":"voy7zrf0f6bs86m02uadhaf","vaultName":"sflo"},"value":"concept.mesh","position":{"start":{"line":10,"column":47,"offset":544},"end":{"line":10,"column":63,"offset":560},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"concept.mesh"}},{"type":"wiki","from":{"fname":"root","id":"voy7zrf0f6bs86m02uadhaf","vaultName":"sflo"},"value":"concept.semantic-flow-site","position":{"start":{"line":10,"column":112,"offset":609},"end":{"line":10,"column":142,"offset":639},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"concept.semantic-flow-site"}},{"type":"wiki","from":{"fname":"root","id":"voy7zrf0f6bs86m02uadhaf","vaultName":"sflo"},"value":"feature","position":{"start":{"line":23,"column":7,"offset":1053},"end":{"line":23,"column":18,"offset":1064},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"feature"}}],"anchors":{"what-is-semantic-flow":{"type":"header","text":"What Is Semantic Flow?","value":"what-is-semantic-flow","line":12,"column":0,"depth":2},"benefits":{"type":"header","text":"Benefits","value":"benefits","line":18,"column":0,"depth":2},"features":{"type":"header","text":"Features","value":"features","line":25,"column":0,"depth":2}},"children":["completed-tasks","p0vd6xnshcxw14ztkglxyxn","qa6hqxy4tknnmutvq13onaq","sfgrcjcttxz7b3qov7efg3f","facets","faq000","ggle3sz2jv3vf53t9qplrzo","mesh-file","mesh-folder","guides","mesh-resource","yxn5rsqsv2gq4s6wbnxsjsj","l9g8eki3dtir51o4jagac5a","28q7fh05bs691llgv7htxnw","products","tkw34hrqxficesa0y2r62s0","tasks","xqjr13fyons9goxv8rjrskj","use-cases","8wh7p4aps8humop7vqymk3n"],"parent":null,"data":{},"body":"\n**Dereferenceable, versioned semantic meshes** will be the foundation for a new era of knowledge graphs.\n\n[[now]] | [[todo]] | [[principle]] | [[dev.contributor.djradon.dev-log]]\n\n## What Is Semantic Flow?\n\n**Semantic Flow** is a framework for managing and publishing resource identifiers, knowledge graphs and other semantic data by leveraging GitHub, Gitlab, and other free static hosting services. It enables a **dereferenceable Semantic Web** where every HTTP IRI returns meaningful content.\n\n[[concept.single-mesh-repo]] provide storage, [[concept.mesh]] provide resource management and publishing, and [[concept.semantic-flow-site]] support data discovery and explainability.\n\n## Benefits\n\n- own your own self-describing data and data schemas\n- complete version history when you want it\n- reliable persistence\n- truly FAIR (Findable, Accessible, Interoperable, and Reusable)\n\n## Features\n\n- seamlessly integrate other data sources anywhere in your mesh\n- generate and customize mini-sites or single-page applications for nodes in your mesh\n- see [[feature]] for a list of planned features\n"},"collectionChildren":null,"customHeadContent":null,"config":{"version":5,"dev":{"enablePreviewV2":true,"enableSelfContainedVaults":true},"commands":{"lookup":{"note":{"selectionMode":"none","confirmVaultOnCreate":true,"vaultSelectionModeOnCreate":"smart","leaveTrace":false,"bubbleUpCreateNew":true,"fuzzThreshold":0.2}},"randomNote":{},"insertNoteLink":{"aliasMode":"selection","enableMultiSelect":false},"insertNoteIndex":{"enableMarker":false},"copyNoteLink":{"aliasMode":"title"},"templateHierarchy":"template"},"workspace":{"vaults":[{"fsPath":"documentation","selfContained":false,"name":"sflo"}],"journal":{"dailyDomain":"daily","name":"journal","dateFormat":"y.MM.dd","addBehavior":"childOfDomain"},"scratch":{"name":"scratch","dateFormat":"y.MM.dd.HHmmss","addBehavior":"asOwnDomain"},"task":{"name":"task","dateFormat":"y.MM.dd","addBehavior":"asOwnDomain","statusSymbols":{"":" ","wip":"w","done":"x","assigned":"a","moved":"m","blocked":"b","delegated":"l","dropped":"d","pending":"y"},"taskCompleteStatus":["done","x"],"prioritySymbols":{"H":"high","M":"medium","L":"low"},"todoIntegration":false,"createTaskSelectionType":"selection2link"},"graph":{"zoomSpeed":1,"createStub":false},"enableAutoCreateOnDefinition":false,"enableXVaultWikiLink":false,"enableRemoteVaultInit":true,"enableUserTags":true,"enableHashTags":true,"workspaceVaultSyncMode":"noCommit","enableAutoFoldFrontmatter":false,"enableEditorDecorations":true,"maxPreviewsCached":10,"maxNoteLength":204800,"enableFullHierarchyNoteTitle":false},"preview":{"enableFMTitle":true,"enableNoteTitleForLink":true,"enableFrontmatterTags":true,"enableHashesForFMTags":false,"enablePrettyRefs":true,"enableKatex":true,"automaticallyShowPreview":false},"publishing":{"enableFMTitle":true,"enableNoteTitleForLink":true,"enablePrettyRefs":true,"enableKatex":true,"copyAssets":true,"siteHierarchies":["root"],"writeStubs":false,"siteRootDir":"docs","seo":{"title":"Semantic Flow Docs","description":"A dendron-based wiki for sflo"},"github":{"enableEditLink":true,"editLinkText":"Edit this page on GitHub","editBranch":"main","editViewMode":"tree"},"enableSiteLastModified":true,"enableFrontmatterTags":true,"enableHashesForFMTags":false,"enableRandomlyColoredTags":true,"enableTaskNotes":true,"enablePrettyLinks":true,"searchMode":"search","siteUrl":"https://semantic-flow.github.io/sflo","assetsPrefix":"/sflo","siteFaviconPath":"favicon.ico","siteIndex":"root"}}},"__N_SSG":true}
{"pageProps":{"note":{"id":"architecture-plan-rdfsource-createnode","title":"Architecture Plan - RdfSource & createNode","desc":"Detailed architecture and implementation plan for RdfSource abstraction and createNode operation","created":"2025-11-28T00:00:00.000Z","custom":{},"fname":"task.2025-11-28-architecture-plan","type":"note","vault":{"fsPath":"documentation","selfContained":false,"name":"sflo"},"contentHash":"4d223fd3a3f78bc1857ff4de43d109ea","updated":1764349923593,"links":[{"type":"wiki","from":{"fname":"task.2025-11-28-architecture-plan","id":"architecture-plan-rdfsource-createnode","vaultName":"sflo"},"value":"user.base","alias":"@base","position":{"start":{"line":199,"column":37,"offset":5147},"end":{"line":199,"column":42,"offset":5152},"indent":[]},"xvault":false,"to":{"fname":"user.base"}},{"type":"wiki","from":{"fname":"task.2025-11-28-architecture-plan","id":"architecture-plan-rdfsource-createnode","vaultName":"sflo"},"value":"user.base","alias":"@base","position":{"start":{"line":723,"column":54,"offset":18060},"end":{"line":723,"column":59,"offset":18065},"indent":[]},"xvault":false,"to":{"fname":"user.base"}},{"from":{"fname":"task.2025-11-27-createNode","id":"ufnbtre0tn2pxq7dzjcgrz0","vaultName":"sflo"},"type":"backlink","position":{"start":{"line":18,"column":35,"offset":652},"end":{"line":18,"column":72,"offset":689},"indent":[]},"value":"task.2025-11-28-architecture-plan"}],"anchors":{"architecture-plan-rdfsource-abstraction--createnode-operation":{"type":"header","text":"Architecture Plan: RdfSource Abstraction & createNode Operation","value":"architecture-plan-rdfsource-abstraction--createnode-operation","line":10,"column":0,"depth":1},"overview":{"type":"header","text":"Overview","value":"overview","line":12,"column":0,"depth":2},"1-rdfsource-abstraction-design":{"type":"header","text":"1. RdfSource Abstraction Design","value":"1-rdfsource-abstraction-design","line":18,"column":0,"depth":2},"11-core-principles":{"type":"header","text":"1.1 Core Principles","value":"11-core-principles","line":20,"column":0,"depth":3},"12-type-definitions":{"type":"header","text":"1.2 Type Definitions","value":"12-type-definitions","line":27,"column":0,"depth":3},"13-core-functions":{"type":"header","text":"1.3 Core Functions","value":"13-core-functions","line":90,"column":0,"depth":3},"14-helper-functions":{"type":"header","text":"1.4 Helper Functions","value":"14-helper-functions","line":148,"column":0,"depth":3},"15-implementation-notes":{"type":"header","text":"1.5 Implementation Notes","value":"15-implementation-notes","line":186,"column":0,"depth":3},"16-testing-strategy":{"type":"header","text":"1.6 Testing Strategy","value":"16-testing-strategy","line":195,"column":0,"depth":3},"2-createnode-operation-design":{"type":"header","text":"2. createNode Operation Design","value":"2-createnode-operation-design","line":213,"column":0,"depth":2},"21-core-function-signature":{"type":"header","text":"2.1 Core Function Signature","value":"21-core-function-signature","line":215,"column":0,"depth":3},"22-internal-functions":{"type":"header","text":"2.2 Internal Functions","value":"22-internal-functions","line":314,"column":0,"depth":3},"23-flow-slug-constants":{"type":"header","text":"2.3 Flow Slug Constants","value":"23-flow-slug-constants","line":367,"column":0,"depth":3},"24-filename-generation":{"type":"header","text":"2.4 Filename Generation","value":"24-filename-generation","line":401,"column":0,"depth":3},"25-metadata-generation-strategy":{"type":"header","text":"2.5 Metadata Generation Strategy","value":"25-metadata-generation-strategy","line":425,"column":0,"depth":3},"26-directory-structure-created":{"type":"header","text":"2.6 Directory Structure Created","value":"26-directory-structure-created","line":484,"column":0,"depth":3},"27-error-handling":{"type":"header","text":"2.7 Error Handling","value":"27-error-handling","line":518,"column":0,"depth":3},"3-simple-node-runner":{"type":"header","text":"3. Simple Node Runner","value":"3-simple-node-runner","line":545,"column":0,"depth":2},"4-testing-strategy":{"type":"header","text":"4. Testing Strategy","value":"4-testing-strategy","line":604,"column":0,"depth":2},"41-rdfsource-tests":{"type":"header","text":"4.1 RdfSource Tests","value":"41-rdfsource-tests","line":606,"column":0,"depth":3},"42-createnode-tests":{"type":"header","text":"4.2 createNode Tests","value":"42-createnode-tests","line":614,"column":0,"depth":3},"43-integration-tests":{"type":"header","text":"4.3 Integration Tests","value":"43-integration-tests","line":630,"column":0,"depth":3},"5-documentation-updates":{"type":"header","text":"5. Documentation Updates","value":"5-documentation-updates","line":637,"column":0,"depth":2},"51-parsing-semantics-spec":{"type":"header","text":"5.1 Parsing Semantics Spec","value":"51-parsing-semantics-spec","line":639,"column":0,"depth":3},"6-dependencies-to-add":{"type":"header","text":"6. Dependencies to Add","value":"6-dependencies-to-add","line":666,"column":0,"depth":2},"7-implementation-order":{"type":"header","text":"7. Implementation Order","value":"7-implementation-order","line":685,"column":0,"depth":2},"8-future-enhancements-out-of-scope":{"type":"header","text":"8. Future Enhancements (Out of Scope)","value":"8-future-enhancements-out-of-scope","line":713,"column":0,"depth":2},"9-success-criteria":{"type":"header","text":"9. Success Criteria","value":"9-success-criteria","line":726,"column":0,"depth":2},"references":{"type":"header","text":"References","value":"references","line":741,"column":0,"depth":2}},"children":[],"parent":"tasks","data":{},"schema":{"schemaId":"task","moduleId":"task"}},"body":"<h1 id=\"architecture-plan---rdfsource--createnode\">Architecture Plan - RdfSource &#x26; createNode<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#architecture-plan---rdfsource--createnode\"></a></h1>\n<h1 id=\"architecture-plan-rdfsource-abstraction--createnode-operation\">Architecture Plan: RdfSource Abstraction &#x26; createNode Operation<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#architecture-plan-rdfsource-abstraction--createnode-operation\"></a></h1>\n<h2 id=\"overview\">Overview<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#overview\"></a></h2>\n<p>This document provides the architectural design for implementing:</p>\n<ol>\n<li><strong>RdfSource abstraction</strong> - A coherent model for RDF loading/serialization</li>\n<li><strong>createNode operation</strong> - Core mesh node initialization using RdfSource</li>\n</ol>\n<h2 id=\"1-rdfsource-abstraction-design\">1. RdfSource Abstraction Design<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#1-rdfsource-abstraction-design\"></a></h2>\n<h3 id=\"11-core-principles\">1.1 Core Principles<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#11-core-principles\"></a></h3>\n<ul>\n<li><strong>Explicit base handling</strong>: Always require a base IRI for parsing</li>\n<li><strong>Mesh-native output</strong>: Serialize with relative IRIs, no <code>@base</code></li>\n<li><strong>Format-agnostic</strong>: Support JSON-LD (primary) and Turtle/TriG (future)</li>\n<li><strong>Testable &#x26; composable</strong>: Small, focused functions that compose well</li>\n</ul>\n<h3 id=\"12-type-definitions\">1.2 Type Definitions<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#12-type-definitions\"></a></h3>\n<p>Location: <a href=\"/sflo/../../shared/core/src/rdf/types.ts\"><code>shared/core/src/rdf/types.ts</code></a></p>\n<pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token doc-comment comment\">/**\n * Source of RDF data - file path, URL, or in-memory content\n */</span>\n<span class=\"token keyword module\">export</span> <span class=\"token keyword\">type</span> <span class=\"token class-name\"><span class=\"token maybe-class-name\">RdfSourceInput</span></span> <span class=\"token operator\">=</span>\n  <span class=\"token operator\">|</span> <span class=\"token punctuation\">{</span> type<span class=\"token operator\">:</span> <span class=\"token string\">\"file\"</span><span class=\"token punctuation\">;</span> path<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span> <span class=\"token punctuation\">}</span>\n  <span class=\"token operator\">|</span> <span class=\"token punctuation\">{</span> type<span class=\"token operator\">:</span> <span class=\"token string\">\"url\"</span><span class=\"token punctuation\">;</span> url<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span> <span class=\"token punctuation\">}</span>\n  <span class=\"token operator\">|</span> <span class=\"token punctuation\">{</span> type<span class=\"token operator\">:</span> <span class=\"token string\">\"content\"</span><span class=\"token punctuation\">;</span> content<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">;</span> format<span class=\"token operator\">:</span> <span class=\"token maybe-class-name\">RdfFormat</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token doc-comment comment\">/**\n * Supported RDF serialization formats\n */</span>\n<span class=\"token keyword module\">export</span> <span class=\"token keyword\">type</span> <span class=\"token class-name\"><span class=\"token maybe-class-name\">RdfFormat</span></span> <span class=\"token operator\">=</span> <span class=\"token string\">\"jsonld\"</span> <span class=\"token operator\">|</span> <span class=\"token string\">\"turtle\"</span> <span class=\"token operator\">|</span> <span class=\"token string\">\"trig\"</span> <span class=\"token operator\">|</span> <span class=\"token string\">\"ntriples\"</span> <span class=\"token operator\">|</span> <span class=\"token string\">\"nquads\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token doc-comment comment\">/**\n * Options for parsing RDF\n */</span>\n<span class=\"token keyword module\">export</span> <span class=\"token keyword\">interface</span> <span class=\"token class-name\"><span class=\"token maybe-class-name\">RdfParseOptions</span></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token doc-comment comment\">/** Base IRI for resolving relative references (REQUIRED) */</span>\n  baseIri<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">;</span>\n  <span class=\"token doc-comment comment\">/** Expected format (auto-detect if not specified) */</span>\n  format<span class=\"token operator\">?</span><span class=\"token operator\">:</span> <span class=\"token maybe-class-name\">RdfFormat</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token doc-comment comment\">/**\n * Options for serializing RDF\n */</span>\n<span class=\"token keyword module\">export</span> <span class=\"token keyword\">interface</span> <span class=\"token class-name\"><span class=\"token maybe-class-name\">RdfSerializeOptions</span></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token doc-comment comment\">/** Output format */</span>\n  format<span class=\"token operator\">:</span> <span class=\"token maybe-class-name\">RdfFormat</span><span class=\"token punctuation\">;</span>\n  <span class=\"token doc-comment comment\">/** Whether to include @base in output (default: false for mesh-native) */</span>\n  includeBase<span class=\"token operator\">?</span><span class=\"token operator\">:</span> <span class=\"token builtin\">boolean</span><span class=\"token punctuation\">;</span>\n  <span class=\"token doc-comment comment\">/** Whether to pretty-print (default: true) */</span>\n  prettyPrint<span class=\"token operator\">?</span><span class=\"token operator\">:</span> <span class=\"token builtin\">boolean</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token doc-comment comment\">/**\n * Metadata about the RDF source\n */</span>\n<span class=\"token keyword module\">export</span> <span class=\"token keyword\">interface</span> <span class=\"token class-name\"><span class=\"token maybe-class-name\">RdfSourceMetadata</span></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token doc-comment comment\">/** Detected or provided base IRI */</span>\n  baseIri<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">;</span>\n  <span class=\"token doc-comment comment\">/** Detected format */</span>\n  format<span class=\"token operator\">:</span> <span class=\"token maybe-class-name\">RdfFormat</span><span class=\"token punctuation\">;</span>\n  <span class=\"token doc-comment comment\">/** Original source location (file path or URL) */</span>\n  sourceLocation<span class=\"token operator\">?</span><span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token doc-comment comment\">/**\n * Loaded RDF dataset with metadata\n */</span>\n<span class=\"token keyword module\">export</span> <span class=\"token keyword\">interface</span> <span class=\"token class-name\"><span class=\"token maybe-class-name\">RdfDataset</span></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token doc-comment comment\">/** The RDF quads (using @rdfjs/types) */</span>\n  quads<span class=\"token operator\">:</span> <span class=\"token maybe-class-name\">Quad</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n  <span class=\"token doc-comment comment\">/** Metadata about the source */</span>\n  metadata<span class=\"token operator\">:</span> <span class=\"token maybe-class-name\">RdfSourceMetadata</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<h3 id=\"13-core-functions\">1.3 Core Functions<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#13-core-functions\"></a></h3>\n<p>Location: <a href=\"/sflo/../../shared/core/src/rdf/source.ts\"><code>shared/core/src/rdf/source.ts</code></a></p>\n<pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token doc-comment comment\">/**\n * Parse RDF from a source into quads\n * \n * <span class=\"token keyword\">@param</span> <span class=\"token parameter\">source</span> - RDF source input\n * <span class=\"token keyword\">@param</span> <span class=\"token parameter\">options</span> - Parse options (baseIri REQUIRED)\n * <span class=\"token keyword\">@returns</span> Loaded dataset with quads and metadata\n * \n * See: concept.implied-rdf-base, concept.identifier.intramesh.relative\n */</span>\n<span class=\"token keyword module\">export</span> <span class=\"token keyword\">async</span> <span class=\"token keyword\">function</span> <span class=\"token function\">parseRdf</span><span class=\"token punctuation\">(</span>\n  source<span class=\"token operator\">:</span> <span class=\"token maybe-class-name\">RdfSourceInput</span><span class=\"token punctuation\">,</span>\n  options<span class=\"token operator\">:</span> <span class=\"token maybe-class-name\">RdfParseOptions</span>\n<span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token known-class-name class-name\">Promise</span><span class=\"token operator\">&#x3C;</span><span class=\"token maybe-class-name\">RdfDataset</span><span class=\"token operator\">></span><span class=\"token punctuation\">;</span>\n\n<span class=\"token doc-comment comment\">/**\n * Serialize RDF quads to a string\n * \n * Mesh-native mode (default):\n * - No @base in output\n * - Local IRIs become relative IRIs\n * \n * <span class=\"token keyword\">@param</span> <span class=\"token parameter\">dataset</span> - RDF dataset to serialize\n * <span class=\"token keyword\">@param</span> <span class=\"token parameter\">options</span> - Serialization options\n * <span class=\"token keyword\">@returns</span> Serialized RDF string\n * \n * See: concept.identifier.intramesh.relative\n */</span>\n<span class=\"token keyword module\">export</span> <span class=\"token keyword\">async</span> <span class=\"token keyword\">function</span> <span class=\"token function\">serializeRdf</span><span class=\"token punctuation\">(</span>\n  dataset<span class=\"token operator\">:</span> <span class=\"token maybe-class-name\">RdfDataset</span><span class=\"token punctuation\">,</span>\n  options<span class=\"token operator\">:</span> <span class=\"token maybe-class-name\">RdfSerializeOptions</span>\n<span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token known-class-name class-name\">Promise</span><span class=\"token operator\">&#x3C;</span><span class=\"token builtin\">string</span><span class=\"token operator\">></span><span class=\"token punctuation\">;</span>\n\n<span class=\"token doc-comment comment\">/**\n * Compute file:/// base IRI from absolute file path\n * \n * <span class=\"token keyword\">@param</span> <span class=\"token parameter\">absolutePath</span> - Absolute filesystem path\n * <span class=\"token keyword\">@returns</span> file:/// URL suitable as RDF base\n */</span>\n<span class=\"token keyword module\">export</span> <span class=\"token keyword\">function</span> <span class=\"token function\">filePathToBaseIri</span><span class=\"token punctuation\">(</span>absolutePath<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token doc-comment comment\">/**\n * Extract base IRI from RDF content (if present)\n * \n * <span class=\"token keyword\">@param</span> <span class=\"token parameter\">content</span> - RDF content string\n * <span class=\"token keyword\">@param</span> <span class=\"token parameter\">format</span> - RDF format\n * <span class=\"token keyword\">@returns</span> Detected base IRI or undefined\n */</span>\n<span class=\"token keyword module\">export</span> <span class=\"token keyword\">async</span> <span class=\"token keyword\">function</span> <span class=\"token function\">detectBaseIri</span><span class=\"token punctuation\">(</span>\n  content<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">,</span>\n  format<span class=\"token operator\">:</span> <span class=\"token maybe-class-name\">RdfFormat</span>\n<span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token known-class-name class-name\">Promise</span><span class=\"token operator\">&#x3C;</span><span class=\"token builtin\">string</span> <span class=\"token operator\">|</span> <span class=\"token keyword nil\">undefined</span><span class=\"token operator\">></span><span class=\"token punctuation\">;</span>\n</code></pre>\n<h3 id=\"14-helper-functions\">1.4 Helper Functions<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#14-helper-functions\"></a></h3>\n<p>Location: <a href=\"/sflo/../../shared/core/src/rdf/helpers.ts\"><code>shared/core/src/rdf/helpers.ts</code></a></p>\n<pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token doc-comment comment\">/**\n * Make IRIs relative to a base\n * \n * Used for creating mesh-native files from external datasets\n * \n * <span class=\"token keyword\">@param</span> <span class=\"token parameter\">quads</span> - RDF quads with absolute IRIs\n * <span class=\"token keyword\">@param</span> <span class=\"token parameter\">baseIri</span> - Base to make relative to\n * <span class=\"token keyword\">@returns</span> Quads with relative IRIs where applicable\n * \n * See: concept.debasing\n */</span>\n<span class=\"token keyword module\">export</span> <span class=\"token keyword\">function</span> <span class=\"token function\">makeIrisRelative</span><span class=\"token punctuation\">(</span>\n  quads<span class=\"token operator\">:</span> <span class=\"token maybe-class-name\">Quad</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  baseIri<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span>\n<span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token maybe-class-name\">Quad</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token doc-comment comment\">/**\n * Detect RDF format from file extension or content\n * \n * <span class=\"token keyword\">@param</span> <span class=\"token parameter\">pathOrContent</span> - File path or content string\n * <span class=\"token keyword\">@returns</span> Detected format\n */</span>\n<span class=\"token keyword module\">export</span> <span class=\"token keyword\">function</span> <span class=\"token function\">detectFormat</span><span class=\"token punctuation\">(</span>pathOrContent<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token maybe-class-name\">RdfFormat</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token doc-comment comment\">/**\n * Validate that a base IRI is suitable for mesh use\n * \n * <span class=\"token keyword\">@param</span> <span class=\"token parameter\">baseIri</span> - IRI to validate\n * <span class=\"token keyword\">@throws</span> if invalid\n */</span>\n<span class=\"token keyword module\">export</span> <span class=\"token keyword\">function</span> <span class=\"token function\">validateMeshBaseIri</span><span class=\"token punctuation\">(</span>baseIri<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token keyword\">void</span><span class=\"token punctuation\">;</span>\n</code></pre>\n<h3 id=\"15-implementation-notes\">1.5 Implementation Notes<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#15-implementation-notes\"></a></h3>\n<ul>\n<li>Use <code>@rdfjs/types</code> for Quad interface</li>\n<li>Use <code>jsonld</code> library for JSON-LD parsing/serialization</li>\n<li>Use <code>n3</code> library for Turtle/TriG parsing/serialization</li>\n<li>Use <code>@rdfjs/data-model</code> for creating quads</li>\n<li>Handle errors gracefully with custom error types</li>\n<li>All functions are pure and stateless</li>\n</ul>\n<h3 id=\"16-testing-strategy\">1.6 Testing Strategy<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#16-testing-strategy\"></a></h3>\n<p>Location: <a href=\"/sflo/../../shared/core/src/rdf/__tests__\"><code>shared/core/src/rdf/__tests__/</code></a></p>\n<p>Test files:</p>\n<ul>\n<li><code>source.test.ts</code> - Core parsing/serialization</li>\n<li><code>helpers.test.ts</code> - Helper functions</li>\n<li><code>integration.test.ts</code> - End-to-end workflows</li>\n</ul>\n<p>Test cases:</p>\n<ul>\n<li>Parse JSON-LD with explicit base</li>\n<li>Parse Turtle with base declaration</li>\n<li>Serialize mesh-native JSON-LD (no <a title=\"Private\" href=\"https://wiki.dendron.so/notes/hfyvYGJZQiUwQaaxQO27q.html\" target=\"_blank\" class=\"private\">@base (Private)</a>, relative IRIs)</li>\n<li>Round-trip: parse → serialize → parse</li>\n<li>Error handling: missing base, invalid format</li>\n<li>File path to base IRI conversion</li>\n<li>Base IRI detection</li>\n</ul>\n<h2 id=\"2-createnode-operation-design\">2. createNode Operation Design<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#2-createnode-operation-design\"></a></h2>\n<h3 id=\"21-core-function-signature\">2.1 Core Function Signature<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#21-core-function-signature\"></a></h3>\n<p>Location: <a href=\"/sflo/../../shared/core/src/operations/create-node.ts\"><code>shared/core/src/operations/create-node.ts</code></a></p>\n<pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token doc-comment comment\">/**\n * Options for creating a new mesh node\n */</span>\n<span class=\"token keyword module\">export</span> <span class=\"token keyword\">interface</span> <span class=\"token class-name\"><span class=\"token maybe-class-name\">CreateNodeOptions</span></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token doc-comment comment\">/** Path to payload dataset (optional) */</span>\n  payloadDatasetPath<span class=\"token operator\">?</span><span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">;</span>\n  \n  <span class=\"token doc-comment comment\">/** Path to reference dataset (optional) */</span>\n  referenceDatasetPath<span class=\"token operator\">?</span><span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">;</span>\n  \n  <span class=\"token doc-comment comment\">/** Path to operational config dataset (optional) */</span>\n  operationalConfigPath<span class=\"token operator\">?</span><span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">;</span>\n  \n  <span class=\"token doc-comment comment\">/** Path to inheritable config dataset (optional) */</span>\n  inheritableConfigPath<span class=\"token operator\">?</span><span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">;</span>\n  \n  <span class=\"token doc-comment comment\">/** Provenance information (optional) */</span>\n  provenanceInput<span class=\"token operator\">?</span><span class=\"token operator\">:</span> <span class=\"token maybe-class-name\">ProvenanceBundleInput</span><span class=\"token punctuation\">;</span>\n  \n  <span class=\"token doc-comment comment\">/** Allow creating in non-empty directory (default: false) */</span>\n  allowNonEmpty<span class=\"token operator\">?</span><span class=\"token operator\">:</span> <span class=\"token builtin\">boolean</span><span class=\"token punctuation\">;</span>\n  \n  <span class=\"token doc-comment comment\">/** Namespace root path for computing base IRIs */</span>\n  namespaceRoot<span class=\"token operator\">?</span><span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token doc-comment comment\">/**\n * Provenance information for node creation\n */</span>\n<span class=\"token keyword module\">export</span> <span class=\"token keyword\">interface</span> <span class=\"token class-name\"><span class=\"token maybe-class-name\">ProvenanceBundleInput</span></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token doc-comment comment\">/** Primary agent IRI (human or system) */</span>\n  primaryAgentIri<span class=\"token operator\">?</span><span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">;</span>\n  \n  <span class=\"token doc-comment comment\">/** Organization IRI (rights holder org) */</span>\n  organizationIri<span class=\"token operator\">?</span><span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">;</span>\n  \n  <span class=\"token doc-comment comment\">/** Additional contributor IRIs */</span>\n  contributorsIri<span class=\"token operator\">?</span><span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n  \n  <span class=\"token doc-comment comment\">/** Rights holder IRI */</span>\n  rightsHolderIri<span class=\"token operator\">?</span><span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">;</span>\n  \n  <span class=\"token doc-comment comment\">/** License IRI (e.g., CC BY-SA URL) */</span>\n  licenseIri<span class=\"token operator\">?</span><span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token doc-comment comment\">/**\n * Result of node creation\n */</span>\n<span class=\"token keyword module\">export</span> <span class=\"token keyword\">interface</span> <span class=\"token class-name\"><span class=\"token maybe-class-name\">CreateNodeResult</span></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token doc-comment comment\">/** Absolute path to created node */</span>\n  nodePath<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">;</span>\n  \n  <span class=\"token doc-comment comment\">/** Node slug (derived from folder name) */</span>\n  nodeSlug<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">;</span>\n  \n  <span class=\"token doc-comment comment\">/** Base IRI for the node */</span>\n  nodeBaseIri<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">;</span>\n  \n  <span class=\"token doc-comment comment\">/** Created flow paths */</span>\n  flows<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    meta<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">;</span>\n    ref<span class=\"token operator\">?</span><span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">;</span>\n    payload<span class=\"token operator\">?</span><span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">;</span>\n    cfgOp<span class=\"token operator\">?</span><span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">;</span>\n    cfgInh<span class=\"token operator\">?</span><span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token doc-comment comment\">/**\n * Create a new mesh node\n * \n * Steps:\n * 1. Validate path (not already a node, handle allowNonEmpty)\n * 2. Create node directory structure\n * 3. Create _node-handle/ stub\n * 4. Create _meta/ v1 and _default/ with minimal metadata\n * 5. Optionally import reference/payload/config datasets\n * 6. Return result summary\n * \n * <span class=\"token keyword\">@param</span> <span class=\"token parameter\">nodeTargetPath</span> - Path where node should be created\n * <span class=\"token keyword\">@param</span> <span class=\"token parameter\">options</span> - Creation options\n * <span class=\"token keyword\">@returns</span> Creation result\n * <span class=\"token keyword\">@throws</span> <span class=\"token punctuation\">{</span>NodeAlreadyExistsError<span class=\"token punctuation\">}</span> if node already initialized\n * <span class=\"token keyword\">@throws</span> <span class=\"token punctuation\">{</span>DirectoryNotEmptyError<span class=\"token punctuation\">}</span> if directory not empty and !allowNonEmpty\n * \n * See: task.2025-11-27-createNode, concept.weave-process\n */</span>\n<span class=\"token keyword module\">export</span> <span class=\"token keyword\">async</span> <span class=\"token keyword\">function</span> <span class=\"token function\">createNode</span><span class=\"token punctuation\">(</span>\n  nodeTargetPath<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">,</span>\n  options<span class=\"token operator\">?</span><span class=\"token operator\">:</span> <span class=\"token maybe-class-name\">CreateNodeOptions</span>\n<span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token known-class-name class-name\">Promise</span><span class=\"token operator\">&#x3C;</span><span class=\"token maybe-class-name\">CreateNodeResult</span><span class=\"token operator\">></span><span class=\"token punctuation\">;</span>\n</code></pre>\n<h3 id=\"22-internal-functions\">2.2 Internal Functions<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#22-internal-functions\"></a></h3>\n<pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token doc-comment comment\">/**\n * Validate that path is suitable for node creation\n */</span>\n<span class=\"token keyword\">async</span> <span class=\"token keyword\">function</span> <span class=\"token function\">validateNodePath</span><span class=\"token punctuation\">(</span>\n  path<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">,</span>\n  allowNonEmpty<span class=\"token operator\">:</span> <span class=\"token builtin\">boolean</span>\n<span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token known-class-name class-name\">Promise</span><span class=\"token operator\">&#x3C;</span><span class=\"token keyword\">void</span><span class=\"token operator\">></span><span class=\"token punctuation\">;</span>\n\n<span class=\"token doc-comment comment\">/**\n * Create directory structure for a node\n */</span>\n<span class=\"token keyword\">async</span> <span class=\"token keyword\">function</span> <span class=\"token function\">createNodeScaffolding</span><span class=\"token punctuation\">(</span>\n  nodePath<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">,</span>\n  nodeSlug<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span>\n<span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token known-class-name class-name\">Promise</span><span class=\"token operator\">&#x3C;</span><span class=\"token keyword\">void</span><span class=\"token operator\">></span><span class=\"token punctuation\">;</span>\n\n<span class=\"token doc-comment comment\">/**\n * Generate minimal v1 metadata for a new node\n */</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">generateNodeMetadata</span><span class=\"token punctuation\">(</span>\n  nodeSlug<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">,</span>\n  nodeBaseIri<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">,</span>\n  provenance<span class=\"token operator\">?</span><span class=\"token operator\">:</span> <span class=\"token maybe-class-name\">ProvenanceBundleInput</span>\n<span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token maybe-class-name\">RdfDataset</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token doc-comment comment\">/**\n * Import and normalize a dataset into a flow\n */</span>\n<span class=\"token keyword\">async</span> <span class=\"token keyword\">function</span> <span class=\"token function\">importDatasetToFlow</span><span class=\"token punctuation\">(</span>\n  sourcePath<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">,</span>\n  targetFlowPath<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">,</span>\n  nodeSlug<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">,</span>\n  flowSlug<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">,</span>\n  nodeBaseIri<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span>\n<span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token known-class-name class-name\">Promise</span><span class=\"token operator\">&#x3C;</span><span class=\"token keyword\">void</span><span class=\"token operator\">></span><span class=\"token punctuation\">;</span>\n\n<span class=\"token doc-comment comment\">/**\n * Derive node slug from folder name\n */</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">deriveNodeSlug</span><span class=\"token punctuation\">(</span>nodePath<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token doc-comment comment\">/**\n * Compute node base IRI from path and namespace root\n */</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">computeNodeBaseIri</span><span class=\"token punctuation\">(</span>\n  nodePath<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">,</span>\n  namespaceRoot<span class=\"token operator\">?</span><span class=\"token operator\">:</span> <span class=\"token builtin\">string</span>\n<span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">;</span>\n</code></pre>\n<h3 id=\"23-flow-slug-constants\">2.3 Flow Slug Constants<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#23-flow-slug-constants\"></a></h3>\n<p>Location: <a href=\"/sflo/../../shared/core/src/constants/flows.ts\"><code>shared/core/src/constants/flows.ts</code></a></p>\n<pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token doc-comment comment\">/**\n * Flow slug constants (from semantic-flow ontology)\n * \n * See: ontology/semantic-flow/_payload-flow/_working/semantic-flow-ontology.jsonld\n */</span>\n<span class=\"token keyword module\">export</span> <span class=\"token keyword\">const</span> <span class=\"token constant\">FLOW_SLUGS</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token constant\">META</span><span class=\"token operator\">:</span> <span class=\"token string\">\"_meta\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token constant\">REF</span><span class=\"token operator\">:</span> <span class=\"token string\">\"_ref\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token constant\">PAYLOAD</span><span class=\"token operator\">:</span> <span class=\"token string\">\"_payload\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token constant\">CFG_OP</span><span class=\"token operator\">:</span> <span class=\"token string\">\"_cfg-op\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token constant\">CFG_INH</span><span class=\"token operator\">:</span> <span class=\"token string\">\"_cfg-inh\"</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span> <span class=\"token keyword module\">as</span> <span class=\"token keyword\">const</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token doc-comment comment\">/**\n * Snapshot folder names\n */</span>\n<span class=\"token keyword module\">export</span> <span class=\"token keyword\">const</span> <span class=\"token constant\">SNAPSHOT_FOLDERS</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token constant\">WORKING</span><span class=\"token operator\">:</span> <span class=\"token string\">\"_working\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token constant\">DEFAULT</span><span class=\"token operator\">:</span> <span class=\"token string\">\"_default\"</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span> <span class=\"token keyword module\">as</span> <span class=\"token keyword\">const</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token doc-comment comment\">/**\n * System folder names\n */</span>\n<span class=\"token keyword module\">export</span> <span class=\"token keyword\">const</span> <span class=\"token constant\">SYSTEM_FOLDERS</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token constant\">HANDLE</span><span class=\"token operator\">:</span> <span class=\"token string\">\"_node-handle\"</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span> <span class=\"token keyword module\">as</span> <span class=\"token keyword\">const</span><span class=\"token punctuation\">;</span>\n</code></pre>\n<h3 id=\"24-filename-generation\">2.4 Filename Generation<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#24-filename-generation\"></a></h3>\n<pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token doc-comment comment\">/**\n * Generate distribution filename for a flow\n * \n * Payload: &#x3C;nodeSlug>.jsonld\n * Others: &#x3C;nodeSlug>_&#x3C;flowSlug>.jsonld\n * \n * <span class=\"token keyword\">@param</span> <span class=\"token parameter\">nodeSlug</span> - Node slug\n * <span class=\"token keyword\">@param</span> <span class=\"token parameter\">flowSlug</span> - Flow slug (undefined for payload)\n * <span class=\"token keyword\">@returns</span> Filename\n */</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">generateDistributionFilename</span><span class=\"token punctuation\">(</span>\n  nodeSlug<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">,</span>\n  flowSlug<span class=\"token operator\">?</span><span class=\"token operator\">:</span> <span class=\"token builtin\">string</span>\n<span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token builtin\">string</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword control-flow\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>flowSlug <span class=\"token operator\">||</span> flowSlug <span class=\"token operator\">===</span> <span class=\"token constant\">FLOW_SLUGS</span><span class=\"token punctuation\">.</span><span class=\"token constant\">PAYLOAD</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword control-flow\">return</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>nodeSlug<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">.jsonld</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword control-flow\">return</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>nodeSlug<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>flowSlug<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">.jsonld</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<h3 id=\"25-metadata-generation-strategy\">2.5 Metadata Generation Strategy<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#25-metadata-generation-strategy\"></a></h3>\n<p>The v1 metadata will include:</p>\n<ol>\n<li>\n<p><strong>Node Description</strong></p>\n<ul>\n<li>Node IRI: <code>&#x3C;></code> (relative, resolves to node)</li>\n<li>Type: Placeholder or inferred from flows</li>\n<li>Label/description: Minimal stub</li>\n</ul>\n</li>\n<li>\n<p><strong>Flow Metadata</strong></p>\n<ul>\n<li>Meta flow IRI: <code>_meta/</code> (relative)</li>\n<li>Flow type: <code>sflo:NodeMetadataFlow</code></li>\n<li>Weave label: Initial (e.g., \"2025-11-28_1112_00\")</li>\n<li>Sequence number: 1</li>\n</ul>\n</li>\n<li>\n<p><strong>Provenance (Minimal)</strong></p>\n<ul>\n<li>NodeCreation activity stub</li>\n<li>Agent reference (if provided)</li>\n<li>Rights/license (if provided)</li>\n<li>No full DelegationChain yet</li>\n</ul>\n</li>\n<li>\n<p><strong>Relative IRIs</strong></p>\n<ul>\n<li>All local references use relative IRIs</li>\n<li>External vocabularies use absolute IRIs</li>\n<li>No <code>@base</code> in serialized output</li>\n</ul>\n</li>\n</ol>\n<p>Example metadata structure:</p>\n<pre class=\"language-jsonld\"><code class=\"language-jsonld\">{\n  \"@context\": {\n    \"sflo\": \"https://semantic-flow.github.io/ontology/semantic-flow/\",\n    \"dcat\": \"http://www.w3.org/ns/dcat#\",\n    \"dcterms\": \"http://purl.org/dc/terms/\",\n    \"prov\": \"http://www.w3.org/ns/prov#\"\n  },\n  \"@graph\": [\n    {\n      \"@id\": \"\",\n      \"@type\": \"sflo:BareNode\",\n      \"dcterms:title\": \"Node Title\"\n    },\n    {\n      \"@id\": \"_meta/\",\n      \"@type\": \"sflo:NodeMetadataFlow\",\n      \"sflo:weaveLabel\": \"2025-11-28_1112_00\",\n      \"sflo:versioningState\": { \"@id\": \"sflo:VersioningState/versioned/\" }\n    },\n    {\n      \"@id\": \"_meta/_default/\",\n      \"@type\": \"sflo:DefaultShot\",\n      \"sflo:sequenceNumber\": 1,\n      \"prov:wasGeneratedBy\": {\n        \"@id\": \"_meta/_default/#creation-activity\"\n      }\n    }\n  ]\n}\n</code></pre>\n<h3 id=\"26-directory-structure-created\">2.6 Directory Structure Created<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#26-directory-structure-created\"></a></h3>\n<pre><code>&#x3C;nodeTargetPath>/\n├── _node-handle/\n│   └── README.md          # Stub explaining the handle concept\n├── _meta/\n│   ├── v1/\n│   │   └── &#x3C;slug>_meta.jsonld\n│   └── _default/\n│       └── &#x3C;slug>_meta.jsonld\n[optional flows if datasets provided:]\n├── _ref/\n│   ├── v1/\n│   │   └── &#x3C;slug>_ref.jsonld\n│   └── _default/\n│       └── &#x3C;slug>_ref.jsonld\n├── _payload/\n│   ├── v1/\n│   │   └── &#x3C;slug>.jsonld\n│   └── _default/\n│       └── &#x3C;slug>.jsonld\n├── _cfg-op/\n│   ├── v1/\n│   │   └── &#x3C;slug>_cfg-op.jsonld\n│   └── _default/\n│       └── &#x3C;slug>_cfg-op.jsonld\n└── _cfg-inh/\n    ├── v1/\n    │   └── &#x3C;slug>_cfg-inh.jsonld\n    └── _default/\n        └── &#x3C;slug>_cfg-inh.jsonld\n</code></pre>\n<h3 id=\"27-error-handling\">2.7 Error Handling<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#27-error-handling\"></a></h3>\n<p>Custom error types in <a href=\"/sflo/../../shared/core/src/errors/node-errors.ts\"><code>shared/core/src/errors/node-errors.ts</code></a>:</p>\n<pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword module\">export</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\"><span class=\"token known-class-name class-name\">NodeAlreadyExistsError</span></span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\"><span class=\"token known-class-name class-name\">Error</span></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span>path<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Node already exists at: </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>path<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">name</span> <span class=\"token operator\">=</span> <span class=\"token string\">\"NodeAlreadyExistsError\"</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword module\">export</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\"><span class=\"token known-class-name class-name\">DirectoryNotEmptyError</span></span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\"><span class=\"token known-class-name class-name\">Error</span></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span>path<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Directory not empty: </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>path<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">. Use allowNonEmpty option to override.</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">name</span> <span class=\"token operator\">=</span> <span class=\"token string\">\"DirectoryNotEmptyError\"</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword module\">export</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\"><span class=\"token known-class-name class-name\">InvalidNodePathError</span></span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\"><span class=\"token known-class-name class-name\">Error</span></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span>path<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">,</span> reason<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Invalid node path: </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>path<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">. Reason: </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>reason<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">name</span> <span class=\"token operator\">=</span> <span class=\"token string\">\"InvalidNodePathError\"</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<h2 id=\"3-simple-node-runner\">3. Simple Node Runner<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#3-simple-node-runner\"></a></h2>\n<p>Location: <a href=\"/sflo/../../scripts/create-node.ts\"><code>scripts/create-node.ts</code></a></p>\n<pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token hashbang comment\">#!/usr/bin/env tsx</span>\n<span class=\"token doc-comment comment\">/**\n * Simple CLI runner for createNode operation\n * \n * Usage:\n *   npx tsx scripts/create-node.ts &#x3C;nodePath> [--allow-non-empty]\n */</span>\n\n<span class=\"token keyword module\">import</span> <span class=\"token imports\"><span class=\"token punctuation\">{</span> createNode <span class=\"token punctuation\">}</span></span> <span class=\"token keyword module\">from</span> <span class=\"token string\">\"@semantic-flow/core\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword module\">import</span> <span class=\"token imports\"><span class=\"token punctuation\">{</span> parseArgs <span class=\"token punctuation\">}</span></span> <span class=\"token keyword module\">from</span> <span class=\"token string\">\"node:util\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">async</span> <span class=\"token keyword\">function</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> values<span class=\"token punctuation\">,</span> positionals <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token function\">parseArgs</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n    options<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token string-property property\">\"allow-non-empty\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> type<span class=\"token operator\">:</span> <span class=\"token string\">\"boolean\"</span><span class=\"token punctuation\">,</span> <span class=\"token keyword module\">default</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    allowPositionals<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword control-flow\">if</span> <span class=\"token punctuation\">(</span>positionals<span class=\"token punctuation\">.</span><span class=\"token property-access\">length</span> <span class=\"token operator\">===</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token console class-name\">console</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">error</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Usage: create-node &#x3C;nodePath> [--allow-non-empty]\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    process<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">exit</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">const</span> nodePath <span class=\"token operator\">=</span> positionals<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword control-flow\">try</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token console class-name\">console</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">log</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Creating node at: </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>nodePath<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    \n    <span class=\"token keyword\">const</span> result <span class=\"token operator\">=</span> <span class=\"token keyword control-flow\">await</span> <span class=\"token function\">createNode</span><span class=\"token punctuation\">(</span>nodePath<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n      allowNonEmpty<span class=\"token operator\">:</span> values<span class=\"token punctuation\">[</span><span class=\"token string\">\"allow-non-empty\"</span><span class=\"token punctuation\">]</span> <span class=\"token keyword module\">as</span> <span class=\"token builtin\">boolean</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token console class-name\">console</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"\\n✅ Node created successfully!\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token console class-name\">console</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">log</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">  Path: </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>result<span class=\"token punctuation\">.</span><span class=\"token property-access\">nodePath</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token console class-name\">console</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">log</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">  Slug: </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>result<span class=\"token punctuation\">.</span><span class=\"token property-access\">nodeSlug</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token console class-name\">console</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">log</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">  Base IRI: </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>result<span class=\"token punctuation\">.</span><span class=\"token property-access\">nodeBaseIri</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token console class-name\">console</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">log</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">\\nFlows created:</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token console class-name\">console</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">log</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">  Metadata: </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>result<span class=\"token punctuation\">.</span><span class=\"token property-access\">flows</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">meta</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword control-flow\">if</span> <span class=\"token punctuation\">(</span>result<span class=\"token punctuation\">.</span><span class=\"token property-access\">flows</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">ref</span><span class=\"token punctuation\">)</span> <span class=\"token console class-name\">console</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">log</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">  Reference: </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>result<span class=\"token punctuation\">.</span><span class=\"token property-access\">flows</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">ref</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword control-flow\">if</span> <span class=\"token punctuation\">(</span>result<span class=\"token punctuation\">.</span><span class=\"token property-access\">flows</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">payload</span><span class=\"token punctuation\">)</span> <span class=\"token console class-name\">console</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">log</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">  Payload: </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>result<span class=\"token punctuation\">.</span><span class=\"token property-access\">flows</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">payload</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword control-flow\">if</span> <span class=\"token punctuation\">(</span>result<span class=\"token punctuation\">.</span><span class=\"token property-access\">flows</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">cfgOp</span><span class=\"token punctuation\">)</span> <span class=\"token console class-name\">console</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">log</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">  Config (Op): </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>result<span class=\"token punctuation\">.</span><span class=\"token property-access\">flows</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">cfgOp</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword control-flow\">if</span> <span class=\"token punctuation\">(</span>result<span class=\"token punctuation\">.</span><span class=\"token property-access\">flows</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">cfgInh</span><span class=\"token punctuation\">)</span> <span class=\"token console class-name\">console</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">log</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">  Config (Inh): </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>result<span class=\"token punctuation\">.</span><span class=\"token property-access\">flows</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">cfgInh</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    \n  <span class=\"token punctuation\">}</span> <span class=\"token keyword control-flow\">catch</span> <span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token console class-name\">console</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">error</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"\\n❌ Error creating node:\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token console class-name\">console</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">error</span><span class=\"token punctuation\">(</span>error <span class=\"token keyword\">instanceof</span> <span class=\"token class-name\"><span class=\"token known-class-name class-name\">Error</span></span> <span class=\"token operator\">?</span> error<span class=\"token punctuation\">.</span><span class=\"token property-access\">message</span> <span class=\"token operator\">:</span> <span class=\"token known-class-name class-name\">String</span><span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    process<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">exit</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre>\n<h2 id=\"4-testing-strategy\">4. Testing Strategy<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#4-testing-strategy\"></a></h2>\n<h3 id=\"41-rdfsource-tests\">4.1 RdfSource Tests<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#41-rdfsource-tests\"></a></h3>\n<ul>\n<li>Unit tests for each function</li>\n<li>Format detection tests</li>\n<li>Base IRI computation tests</li>\n<li>Round-trip parse/serialize tests</li>\n<li>Error handling tests</li>\n</ul>\n<h3 id=\"42-createnode-tests\">4.2 createNode Tests<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#42-createnode-tests\"></a></h3>\n<p>Location: <a href=\"/sflo/../../shared/core/src/operations/__tests__/create-node.test.ts\"><code>shared/core/src/operations/__tests__/create-node.test.ts</code></a></p>\n<p>Test cases:</p>\n<ol>\n<li>Create node in empty directory</li>\n<li>Fail on already-initialized node</li>\n<li>Fail on non-empty directory without flag</li>\n<li>Succeed on non-empty with allowNonEmpty</li>\n<li>Create node with payload dataset</li>\n<li>Create node with reference dataset</li>\n<li>Create node with all optional datasets</li>\n<li>Validate metadata content</li>\n<li>Validate filename conventions</li>\n<li>Validate directory structure</li>\n</ol>\n<h3 id=\"43-integration-tests\">4.3 Integration Tests<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#43-integration-tests\"></a></h3>\n<p>End-to-end scenarios:</p>\n<ol>\n<li>Create node → read metadata → validate structure</li>\n<li>Create node → import dataset → verify relative IRIs</li>\n<li>Multiple nodes in hierarchy</li>\n</ol>\n<h2 id=\"5-documentation-updates\">5. Documentation Updates<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#5-documentation-updates\"></a></h2>\n<h3 id=\"51-parsing-semantics-spec\">5.1 Parsing Semantics Spec<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#51-parsing-semantics-spec\"></a></h3>\n<p>Update the following documentation files:</p>\n<ol>\n<li>\n<p><strong><a href=\"/sflo/../../documentation/concept.identifier.intramesh.relative.md\"><code>concept.identifier.intramesh.relative.md</code></a></strong></p>\n<ul>\n<li>Add section on parsing with base IRI</li>\n<li>Add examples of relative IRI resolution</li>\n</ul>\n</li>\n<li>\n<p><strong><a href=\"/sflo/../../documentation/concept.iri.md\"><code>concept.iri.md</code></a></strong></p>\n<ul>\n<li>Add section on base IRI computation</li>\n<li>Add file:/// URL examples</li>\n</ul>\n</li>\n<li>\n<p><strong><a href=\"/sflo/../../documentation/concept.implied-rdf-base.md\"><code>concept.implied-rdf-base.md</code></a></strong></p>\n<ul>\n<li>Add detailed parsing rules</li>\n<li>Add serialization rules</li>\n<li>Add examples</li>\n</ul>\n</li>\n<li>\n<p><strong><a href=\"/sflo/../../documentation/concept.debasing.md\"><code>concept.debasing.md</code></a></strong></p>\n<ul>\n<li>Formalize the algorithm</li>\n<li>Add step-by-step examples</li>\n<li>Reference RdfSource functions</li>\n</ul>\n</li>\n<li>\n<p><strong>New file: <a href=\"/sflo/../../documentation/concept.rdf-source.md\"><code>concept.rdf-source.md</code></a></strong></p>\n<ul>\n<li>Document the RdfSource abstraction</li>\n<li>API reference</li>\n<li>Usage examples</li>\n</ul>\n</li>\n</ol>\n<h2 id=\"6-dependencies-to-add\">6. Dependencies to Add<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#6-dependencies-to-add\"></a></h2>\n<p>Update <a href=\"/sflo/../../shared/core/package.json\"><code>shared/core/package.json</code></a>:</p>\n<pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"dependencies\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"@rdfjs/types\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^1.1.0\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"@rdfjs/data-model\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^2.0.0\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"jsonld\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^8.3.2\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"n3\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^1.17.2\"</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"devDependencies\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"@types/jsonld\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^1.5.13\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"@types/n3\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^1.16.4\"</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<h2 id=\"7-implementation-order\">7. Implementation Order<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#7-implementation-order\"></a></h2>\n<ol>\n<li>\n<p><strong>Phase 1: RdfSource Foundation</strong> (1-2 days)</p>\n<ul>\n<li>Install dependencies</li>\n<li>Create type definitions</li>\n<li>Implement core parsing/serialization</li>\n<li>Implement helper functions</li>\n<li>Write unit tests</li>\n</ul>\n</li>\n<li>\n<p><strong>Phase 2: createNode Core</strong> (2-3 days)</p>\n<ul>\n<li>Implement path validation</li>\n<li>Implement scaffolding functions</li>\n<li>Implement metadata generation</li>\n<li>Implement optional dataset import</li>\n<li>Write unit tests</li>\n</ul>\n</li>\n<li>\n<p><strong>Phase 3: Integration</strong> (1 day)</p>\n<ul>\n<li>Create runner script</li>\n<li>Write integration tests</li>\n<li>Manual testing</li>\n</ul>\n</li>\n<li>\n<p><strong>Phase 4: Documentation</strong> (1 day)</p>\n<ul>\n<li>Update concept docs</li>\n<li>Add API documentation</li>\n<li>Update task files</li>\n</ul>\n</li>\n</ol>\n<p><strong>Total estimated time: 5-7 days</strong></p>\n<h2 id=\"8-future-enhancements-out-of-scope\">8. Future Enhancements (Out of Scope)<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#8-future-enhancements-out-of-scope\"></a></h2>\n<p>These are explicitly <strong>not</strong> part of this task:</p>\n<ul>\n<li>Full debasing algorithm with IRI rewriting</li>\n<li>Payload unpacking into child nodes</li>\n<li>Config inheritance from parent nodes</li>\n<li>Full PROV/DelegationChain modeling</li>\n<li>SHACL validation</li>\n<li>RDF store integration</li>\n<li>CLI framework (Oclif) integration</li>\n<li>Interactive mode with prompts</li>\n</ul>\n<h2 id=\"9-success-criteria\">9. Success Criteria<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#9-success-criteria\"></a></h2>\n<p>The implementation is complete when:</p>\n<ol>\n<li>✅ RdfSource can parse JSON-LD and Turtle with explicit base</li>\n<li>✅ RdfSource can serialize mesh-native JSON-LD (no <a title=\"Private\" href=\"https://wiki.dendron.so/notes/hfyvYGJZQiUwQaaxQO27q.html\" target=\"_blank\" class=\"private\">@base (Private)</a>, relative IRIs)</li>\n<li>✅ createNode creates correct directory structure</li>\n<li>✅ createNode generates valid v1 metadata</li>\n<li>✅ createNode can import optional datasets</li>\n<li>✅ All tests pass (unit + integration)</li>\n<li>✅ Documentation is updated</li>\n<li>✅ Simple runner script works</li>\n<li>✅ Code follows project conventions</li>\n<li>✅ Task files are updated with progress</li>\n</ol>\n<h2 id=\"references\">References<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#references\"></a></h2>\n<ul>\n<li><a href=\"/sflo/./task.2025-11-28-rdfsource-debasing-parsing.md\">task.2025-11-28-rdfsource-debasing-parsing</a></li>\n<li><a href=\"/sflo/./task.2025-11-27-createNode.md\">task.2025-11-27-createNode</a></li>\n<li><a href=\"/sflo/./concept.identifier.intramesh.relative.md\">concept.identifier.intramesh.relative</a></li>\n<li><a href=\"/sflo/./concept.implied-rdf-base.md\">concept.implied-rdf-base</a></li>\n<li><a href=\"/sflo/./concept.debasing.md\">concept.debasing</a></li>\n<li><a href=\"/sflo/./concept.weave-process.md\">concept.weave-process</a></li>\n<li><a href=\"/sflo/./dev.general-guidance.md\">dev.general-guidance</a></li>\n</ul>\n<hr>\n<strong>Backlinks</strong>\n<ul>\n<li><a href=\"/sflo/notes/ufnbtre0tn2pxq7dzjcgrz0\">2025-11-27-createNode</a></li>\n</ul>","noteIndex":{"id":"voy7zrf0f6bs86m02uadhaf","title":"Semantic Flow Documentation","desc":"","updated":1756155165637,"created":1755709990079,"custom":{"nav_order":0,"permalink":"/"},"fname":"root","type":"note","vault":{"fsPath":"documentation","selfContained":false,"name":"sflo"},"contentHash":"98cbbdb73a40d62308166fed9c2f594f","links":[{"type":"wiki","from":{"fname":"root","id":"voy7zrf0f6bs86m02uadhaf","vaultName":"sflo"},"value":"now","position":{"start":{"line":4,"column":1,"offset":107},"end":{"line":4,"column":8,"offset":114},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"now"}},{"type":"wiki","from":{"fname":"root","id":"voy7zrf0f6bs86m02uadhaf","vaultName":"sflo"},"value":"todo","position":{"start":{"line":4,"column":11,"offset":117},"end":{"line":4,"column":19,"offset":125},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"todo"}},{"type":"wiki","from":{"fname":"root","id":"voy7zrf0f6bs86m02uadhaf","vaultName":"sflo"},"value":"principle","position":{"start":{"line":4,"column":22,"offset":128},"end":{"line":4,"column":35,"offset":141},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"principle"}},{"type":"wiki","from":{"fname":"root","id":"voy7zrf0f6bs86m02uadhaf","vaultName":"sflo"},"value":"dev.contributor.djradon.dev-log","position":{"start":{"line":4,"column":38,"offset":144},"end":{"line":4,"column":73,"offset":179},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"dev.contributor.djradon.dev-log"}},{"type":"wiki","from":{"fname":"root","id":"voy7zrf0f6bs86m02uadhaf","vaultName":"sflo"},"value":"concept.single-mesh-repo","position":{"start":{"line":10,"column":1,"offset":498},"end":{"line":10,"column":29,"offset":526},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"concept.single-mesh-repo"}},{"type":"wiki","from":{"fname":"root","id":"voy7zrf0f6bs86m02uadhaf","vaultName":"sflo"},"value":"concept.mesh","position":{"start":{"line":10,"column":47,"offset":544},"end":{"line":10,"column":63,"offset":560},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"concept.mesh"}},{"type":"wiki","from":{"fname":"root","id":"voy7zrf0f6bs86m02uadhaf","vaultName":"sflo"},"value":"concept.semantic-flow-site","position":{"start":{"line":10,"column":112,"offset":609},"end":{"line":10,"column":142,"offset":639},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"concept.semantic-flow-site"}},{"type":"wiki","from":{"fname":"root","id":"voy7zrf0f6bs86m02uadhaf","vaultName":"sflo"},"value":"feature","position":{"start":{"line":23,"column":7,"offset":1053},"end":{"line":23,"column":18,"offset":1064},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"feature"}}],"anchors":{"what-is-semantic-flow":{"type":"header","text":"What Is Semantic Flow?","value":"what-is-semantic-flow","line":12,"column":0,"depth":2},"benefits":{"type":"header","text":"Benefits","value":"benefits","line":18,"column":0,"depth":2},"features":{"type":"header","text":"Features","value":"features","line":25,"column":0,"depth":2}},"children":["completed-tasks","p0vd6xnshcxw14ztkglxyxn","qa6hqxy4tknnmutvq13onaq","sfgrcjcttxz7b3qov7efg3f","facets","faq000","ggle3sz2jv3vf53t9qplrzo","mesh-file","mesh-folder","guides","mesh-resource","yxn5rsqsv2gq4s6wbnxsjsj","l9g8eki3dtir51o4jagac5a","28q7fh05bs691llgv7htxnw","products","tkw34hrqxficesa0y2r62s0","tasks","xqjr13fyons9goxv8rjrskj","use-cases","8wh7p4aps8humop7vqymk3n"],"parent":null,"data":{},"body":"\n**Dereferenceable, versioned semantic meshes** will be the foundation for a new era of knowledge graphs.\n\n[[now]] | [[todo]] | [[principle]] | [[dev.contributor.djradon.dev-log]]\n\n## What Is Semantic Flow?\n\n**Semantic Flow** is a framework for managing and publishing resource identifiers, knowledge graphs and other semantic data by leveraging GitHub, Gitlab, and other free static hosting services. It enables a **dereferenceable Semantic Web** where every HTTP IRI returns meaningful content.\n\n[[concept.single-mesh-repo]] provide storage, [[concept.mesh]] provide resource management and publishing, and [[concept.semantic-flow-site]] support data discovery and explainability.\n\n## Benefits\n\n- own your own self-describing data and data schemas\n- complete version history when you want it\n- reliable persistence\n- truly FAIR (Findable, Accessible, Interoperable, and Reusable)\n\n## Features\n\n- seamlessly integrate other data sources anywhere in your mesh\n- generate and customize mini-sites or single-page applications for nodes in your mesh\n- see [[feature]] for a list of planned features\n"},"collectionChildren":null,"customHeadContent":null,"config":{"version":5,"dev":{"enablePreviewV2":true,"enableSelfContainedVaults":true},"commands":{"lookup":{"note":{"selectionMode":"none","confirmVaultOnCreate":true,"vaultSelectionModeOnCreate":"smart","leaveTrace":false,"bubbleUpCreateNew":true,"fuzzThreshold":0.2}},"randomNote":{},"insertNoteLink":{"aliasMode":"selection","enableMultiSelect":false},"insertNoteIndex":{"enableMarker":false},"copyNoteLink":{"aliasMode":"title"},"templateHierarchy":"template"},"workspace":{"vaults":[{"fsPath":"documentation","selfContained":false,"name":"sflo"}],"journal":{"dailyDomain":"daily","name":"journal","dateFormat":"y.MM.dd","addBehavior":"childOfDomain"},"scratch":{"name":"scratch","dateFormat":"y.MM.dd.HHmmss","addBehavior":"asOwnDomain"},"task":{"name":"task","dateFormat":"y.MM.dd","addBehavior":"asOwnDomain","statusSymbols":{"":" ","wip":"w","done":"x","assigned":"a","moved":"m","blocked":"b","delegated":"l","dropped":"d","pending":"y"},"taskCompleteStatus":["done","x"],"prioritySymbols":{"H":"high","M":"medium","L":"low"},"todoIntegration":false,"createTaskSelectionType":"selection2link"},"graph":{"zoomSpeed":1,"createStub":false},"enableAutoCreateOnDefinition":false,"enableXVaultWikiLink":false,"enableRemoteVaultInit":true,"enableUserTags":true,"enableHashTags":true,"workspaceVaultSyncMode":"noCommit","enableAutoFoldFrontmatter":false,"enableEditorDecorations":true,"maxPreviewsCached":10,"maxNoteLength":204800,"enableFullHierarchyNoteTitle":false},"preview":{"enableFMTitle":true,"enableNoteTitleForLink":true,"enableFrontmatterTags":true,"enableHashesForFMTags":false,"enablePrettyRefs":true,"enableKatex":true,"automaticallyShowPreview":false},"publishing":{"enableFMTitle":true,"enableNoteTitleForLink":true,"enablePrettyRefs":true,"enableKatex":true,"copyAssets":true,"siteHierarchies":["root"],"writeStubs":false,"siteRootDir":"docs","seo":{"title":"Semantic Flow Docs","description":"A dendron-based wiki for sflo"},"github":{"enableEditLink":true,"editLinkText":"Edit this page on GitHub","editBranch":"main","editViewMode":"tree"},"enableSiteLastModified":true,"enableFrontmatterTags":true,"enableHashesForFMTags":false,"enableRandomlyColoredTags":true,"enableTaskNotes":true,"enablePrettyLinks":true,"searchMode":"search","siteUrl":"https://semantic-flow.github.io/sflo","assetsPrefix":"/sflo","siteFaviconPath":"favicon.ico","siteIndex":"root"}}},"__N_SSG":true}